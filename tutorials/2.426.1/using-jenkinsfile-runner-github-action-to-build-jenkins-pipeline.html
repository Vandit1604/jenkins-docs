<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Build a Jenkins pipeline by using Jenkinsfile Runner GitHub Actions :: Jenkins Docs</title>
    <link rel="canonical" href="https://docs.jenkins.com/tutorials/2.426.1/using-jenkinsfile-runner-github-action-to-build-jenkins-pipeline.html">
    <link rel="prev" href="build-a-node-js-and-react-app-with-npm.html">
    <link rel="next" href="tutorial-for-installing-jenkins-on-AWS.html">
    <meta name="generator" content="Antora 3.1.6">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
<link rel="icon" href="../../favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<script type="module" src="https://unpkg.com/@jenkinsci/jenkins-io-components?module"></script>
<jio-navbar style="  position: fixed;
  top: 0;
  width: 100vw;
  z-index: 100;"></jio-navbar>
  <div class="body">
<div class="nav-container" data-component="tutorials" data-version="2.426.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Jenkins Tutorials</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index.html">Tutorials overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tutorials-for-installing-jenkins-on-Google-Cloud.html">Jenkins on Google Cloud</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="build-a-java-app-with-maven.html">Build a Java app with Maven</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="build-a-multibranch-pipeline-project.html">End-to-End Multibranch Pipeline Project Creation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="build-a-node-js-and-react-app-with-npm.html">Build a Node.js and React app with npm</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="using-jenkinsfile-runner-github-action-to-build-jenkins-pipeline.html">Build a Jenkins pipeline by using Jenkinsfile Runner GitHub Actions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tutorial-for-installing-jenkins-on-AWS.html">Jenkins on AWS</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="build-a-python-app-with-pyinstaller.html">Build a Python app with PyInstaller</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="create-a-pipeline-in-blue-ocean.html">Create a Pipeline in Blue Ocean</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="build-a-labview-app.html">Build a LabVIEW app</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Jenkins Tutorials</span>
    <span class="version">2.426.1</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../about/index.html">About Jenkins</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../about/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../images/index.html">Artwork</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../images/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../books/index.html">Jenkins Books</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../books/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../community/index.html">Jenkins Community</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../community/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../dev-docs/index.html">Jenkins Developer Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../dev-docs/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../download/latest/index.html">Jenkins Download and Deployment</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../download/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../events/index.html">Jenkins Events</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../events/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../project/index.html">Jenkins Project</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../project/index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../projects/index.html">Jenkins Projects</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../projects/index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../security/index.html">Jenkins Security Advisories</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../security/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../solutions/2.426.1/index.html">Jenkins Solutions Page</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../solutions/2.426.1/index.html">2.426.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../sigs/index.html">Jenkins Special Interest Groups</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../sigs/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="index.html">Jenkins Tutorials</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">2.426.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../user-docs/2.426.1/index.html">Jenkins User Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../user-docs/2.426.1/index.html">2.426.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../user-docs/2.426.1/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Jenkins Tutorials</a></li>
    <li><a href="using-jenkinsfile-runner-github-action-to-build-jenkins-pipeline.html">Build a Jenkins pipeline by using Jenkinsfile Runner GitHub Actions</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/Vandit1604/jenkins-docs/edit/main/docs/tutorials/modules/ROOT/pages/using-jenkinsfile-runner-github-action-to-build-jenkins-pipeline.adoc"><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"/></svg>  Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Build a Jenkins pipeline by using Jenkinsfile Runner GitHub Actions</h1>
<div class="admonitionblock note">
    <table>
        <tbody>
            <tr>
                <td class="icon"> <i class="fa icon-note" title="Note"></i> </td>
                <td class="content">
                    <div class="paragraph">
                        <p>This site is the new docs site currently being tested. For the actual docs in use please go to <a href="https://www.jenkins.io/doc/">https://www.jenkins.io/doc</a>.</p>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial shows you how to use <a href="https://jenkinsci.github.io/jfr-action-doc/">Jenkinsfile Runner GitHub Actions</a> in the <a href="https://github.com/features/actions">GitHub Actions</a> context.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_concept"><a class="anchor" href="#_the_concept"></a>The concept</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Classical Jenkins instances bind physically with the permanently running servers.
<a href="https://github.com/jenkinsci/jenkinsfile-runner">Jenkinsfile Runner</a> packages the Jenkins core and other necessary items, and serves as an entry point to your pipeline job.
At a high level, Jenkinsfile Runner GitHub Actions wrap around the Jenkinsfile Runner and other necessary modules for the user.
Once the user commits the changes to the remote GitHub repository, the GitHub Actions will run the pipeline as defined by the Jenkinsfile.
After the pipeline ends, the user can view the pipeline log in the GitHub Action page.
Furthermore, the user can integrate the GitHub Actions in the marketplace with the Jenkinsfile Runner GitHub Actions.</p>
</div>
<div class="sect2">
<h3 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h3>
<div class="paragraph">
<p>For this tutorial, you will need:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A GitHub account</p>
</li>
<li>
<p>A GitHub repository</p>
</li>
<li>
<p>Git installed locally</p>
</li>
<li>
<p>Fundamental knowledge <a href="https://docs.github.com/en/actions">of GitHub Actions and how they work</a>.</p>
</li>
<li>
<p>If you want to integrate Jenkins plugins, you also need to know what <a href="#projects:ROOT:index.adoc/jcasc/">JCasC</a> is.
This tutorial reviews some basic concepts of JCasC.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_create_a_github_repository"><a class="anchor" href="#_create_a_github_repository"></a>Create a GitHub repository</h3>
<div class="paragraph">
<p>We recommend users refer to <a href="https://docs.github.com/en/get-started/quickstart/create-a-repo">the GitHub official guide</a> as a starter.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the upper-right corner of GitHub, use the “+” drop-down menu, then select <strong>New repository</strong>.</p>
</li>
<li>
<p>Provide a memorable name for your repository such as "hello-world".</p>
</li>
<li>
<p>Optionally, add a description of your repository.
For example, "My first repository on GitHub".</p>
</li>
<li>
<p>Choose a repository visibility.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>GitHub Actions are free for standard GitHub-hosted runners in public repositories and self-hosted runners.
If you make the repository private, each GitHub account receives a predetermined amount of free minutes and storage for use with GitHub-hosted runners.
Please refer to <a href="https://docs.github.com/en/billing/managing-billing-for-github-actions/about-billing-for-github-actions">the billing and pricing of GitHub Actions</a> for more information.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_create_a_jenkinsfile"><a class="anchor" href="#_create_a_jenkinsfile"></a>Create a Jenkinsfile</h3>
<div class="paragraph">
<p>In this section you will create a Jenkinsfile, which defines how to run the Jenkins pipeline.
Refer to the <a href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions">official guide</a> for more details about the workflow definitions.
The following is an example Jenkinsfile, where the name of this Jenkinsfile is <code>Jenkinsfile</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">pipeline {
    agent any
    stages {
        stage('hello') {
            steps {
                sh 'echo Hello Jenkins!'
            }
        }
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_create_a_plugin_list_file"><a class="anchor" href="#_create_a_plugin_list_file"></a>Create a plugin list file</h3>
<div class="paragraph">
<p>In this section, you will create a plugin list file, which specifies the plugins you will need to install in the ephemeral Jenkins instance.
Please refer to <a href="https://github.com/jenkinsci/plugin-installation-manager-tool#plugin-input-format">the valid plugin input format</a>.</p>
</div>
<div class="paragraph">
<p>The following example plugin list file will install all the specified latest plugins.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-txt hljs" data-lang="txt">git
docker
junit
credentials
blueocean</code></pre>
</div>
</div>
<div class="paragraph">
<p>In our example, we don’t have to install any extra plugins, so you can create an empty plugin list file called “plugins.txt”.</p>
</div>
</div>
<div class="sect2">
<h3 id="_create_a_workflow_definition_in_the_container"><a class="anchor" href="#_create_a_workflow_definition_in_the_container"></a>Create a workflow definition in the container</h3>
<div class="paragraph">
<p>In this section, you’ll learn how to create a workflow definition so you can run Jenkins pipeline with GitHub Actions.
The following steps are required to create the definition.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In your local GitHub repository prepare a workflow definition YAML file with a name, such as  <code>ci.yml</code>, in the “.github/workflows” directory.</p>
</li>
<li>
<p>Create the name of your workflow and event that triggers your workflow.
Refer to <a href="https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#available-events">the available events</a> that trigger workflows.
In our example, the <code>push</code> event triggers the workflow when a commit or tag is pushed.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">name: Java CI
on: [push]</code></pre>
</div>
</div>
</li>
<li>
<p>Use an Ubuntu runner for the job.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">jobs:
  job-name:
    runs-on: ubuntu-latest</code></pre>
</div>
</div>
</li>
<li>
<p>(Optional) If you want to use <code>jfr-container-action</code> later, you need to declare this using the <code>ghcr.io/jenkinsci/jenkinsfile-runner:master</code> or any image extending it.
If you choose to use <code>jfr-static-image-action</code>, you can skip this step.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">jobs:
  job-name:
    runs-on: ubuntu-latest
    container:
      image: ghcr.io/jenkinsci/jenkinsfile-runner:master</code></pre>
</div>
</div>
</li>
<li>
<p>Call the <code>actions/checkout@v2</code> to pull your codes into the runner.</p>
<div class="ulist">
<ul>
<li>
<p>“Call” means “uses” in the workflow definition specifically.
You can check the details about the “uses” keyword.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">- uses: actions/checkout@v2</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Call the Jenkinsfile-runner actions.</p>
<div class="ulist">
<ul>
<li>
<p>If you use <code>jfr-container-action</code>, you need to call <code>jenkinsci/jfr-container-action@master</code> and provide the necessary inputs.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">uses:
  jenkinsci/jfr-container-action@master
with:
  command: run
  jenkinsfile: Jenkinsfile
  pluginstxt: plugins.txt</code></pre>
</div>
</div>
</li>
<li>
<p>If you use <code>jfr-static-image-action</code>, you need to call <code>jenkinsci/jfr-static-image-action@master</code> and provide the necessary inputs.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">uses:
  jenkinsci/jfr-static-image-action@master
with:
  command: run
  jenkinsfile: Jenkinsfile
  pluginstxt: plugins.txt</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you use <code>jfr-container-action</code>, you can verify your work by checking the following complete example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">name: Java CI
on: [push]
jobs:
  jenkins-container-pipeline:
    runs-on: ubuntu-latest
    container:
      image: ghcr.io/jenkinsci/jenkinsfile-runner:master
    steps:
      - uses: actions/checkout@v2
      - uses:
          jenkinsci/jfr-container-action@master
        with:
          command: run
          jenkinsfile: Jenkinsfile
          pluginstxt: plugins.txt
          jcasc: jcasc.yml</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you use <code>jfr-static-image-action</code>, you can verify your work by checking the following complete example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">name: Java CI
on: [push]
jobs:
  jenkins-static-image-pipeline:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses:
          jenkinsci/jfr-static-image-action@master
        with:
          command: run
          jenkinsfile: Jenkinsfile
          pluginstxt: plugins.txt
          jcasc: jcasc.yml</code></pre>
</div>
</div>
<div class="paragraph">
<p>There is another powerful GitHub Action list called Jenkinsfile Runner Runtime Actions.
For these GitHub Actions, you can run them in any runners, which are Windows, Linux and macOS.
You can check their step by step usage <a href="https://jenkinsci.github.io/jfr-action-doc/docs/user-guide/step-by-step-usage.html#runtime-actions-usage">here</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_access_the_workflow_logs"><a class="anchor" href="#_access_the_workflow_logs"></a>Access the workflow logs</h3>
<div class="paragraph">
<p>Once you create your workflow definition, you can commit all the local changes to the remote repository.
Pushing your commits will trigger and execute your workflow.
After this workflow has started, you can see the visualization graph of the run&#8217;s progress and view each step&#8217;s activity on GitHub.
If you want to learn more about viewing your workflow details, refer to <a href="https://docs.github.com/en/actions/quickstart#viewing-your-workflow-results">the official guide in GitHub</a>.</p>
</div>
<div class="paragraph boxshadow">
<p><span class="image"><img src="_images/jenkinsfile-runner-github-actions-01-access-workflow-logs.jpeg" alt="Access the workflow logs" width="100%"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="_add_jcasc_optional"><a class="anchor" href="#_add_jcasc_optional"></a>Add JCasC (optional)</h3>
<div class="paragraph">
<p>Typically, we need to access the web UI to set up Jenkins.
However, we’re unable to access the web UI under the circumstances of running Jenkins pipeline in the GitHub Actions, since the Jenkins instance is ephemeral.
The JCasC (<a href="https://github.com/jenkinsci/configuration-as-code-plugin">Jenkins Configuration as Code</a>) plugin can configure this ephemeral Jenkins instance, by providing the human-readable declarative configuration files.</p>
</div>
<div class="paragraph">
<p>In this example, we review how to set up the environment variables by JCasC and access them in the Jenkinsfile.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a JCasC YAML file called <code>jcasc.yml</code> and declare the environment variables:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">jenkins:
  globalNodeProperties:
    - envVars:
        env:
          - key: hello
            value: world</code></pre>
</div>
</div>
</li>
<li>
<p>Create a Jenkinsfile:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">pipeline {
    agent any
    stages {
        stage('test casc env') {
            steps {
                echo "JCasC env.hello: ${env.hello}"
            }
        }
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Specify the <code>jcasc.yml</code> in the GitHub Actions input:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">uses:
  jenkinsci/jfr-container-action@master
with:
  command: run
  jenkinsfile: Jenkinsfile
  pluginstxt: plugins.txt
  jcasc: jcasc.yml</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>For additional information, refer to the <a href="https://github.com/jenkinsci/configuration-as-code-plugin/tree/master/demos">examples</a> provided by the <a href="https://plugins.jenkins.io/configuration-as-code">Configuration as Code</a> plugin, and learn how to configure the Jenkins instance without using the UI page.
Some plugins do not have concrete examples, but you can debug and find their JCasC in the UI page.
You can check the configuration in <strong>Manage Jenkins</strong> &#8594; <strong>Configuration as Code</strong> &#8594; <strong>View Configuration</strong>.
Then, you can copy the parts you need to the JCasC file.</p>
</div>
</div>
<div class="sect2">
<h3 id="_add_and_configure_plugins_optional"><a class="anchor" href="#_add_and_configure_plugins_optional"></a>Add and configure plugins (optional)</h3>
<div class="paragraph">
<p>There are many powerful plugins that can be part of your Jenkins instance.
You can add the plugins in the plugin list file, and configure the plugins in the JCasC YAML file as needed.</p>
</div>
<div class="paragraph">
<p>In this example, we review how to install JDK11 in the ephemeral Jenkins instance.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Specify <code>adoptopenjdk</code> plugin in the plugins.txt file.
As the version is not specified, the latest version will be installed.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-txt hljs" data-lang="txt">adoptopenjdk</code></pre>
</div>
</div>
</li>
<li>
<p>Create a JCasC Yaml file named <code>jcasc.yml</code> and specify which JDK version to install.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">tool:
  jdk:
    installations:
      - name: jdk11
        home: "~/jdk11"
        properties:
          - installSource:
              installers:
                - adoptOpenJdkInstaller:
                    id: "jdk-11.0.14.1+1"</code></pre>
</div>
</div>
</li>
<li>
<p>Create a Jenkinsfile. Remember to set up JDK11 as a tool.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">pipeline {
    agent any
    tools {
        maven 'maven'
        jdk 'jdk11'
    }
    stages {
        stage('env') {
            steps {
                sh 'mvn --version'
            }
        }
        stage('build') {
            steps {
                sh 'mvn clean install -B --no-transfer-progress'
            }
        }
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Specify the <code>jcasc.yml</code> in the GitHub Actions input.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">uses:
  jenkinsci/jfr-container-action@master
with:
  command: run
  jenkinsfile: Jenkinsfile
  pluginstxt: plugins.txt
  jcasc: jcasc.yml</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_configure_ephemeral_jenkins_instance_optional"><a class="anchor" href="#_configure_ephemeral_jenkins_instance_optional"></a>Configure ephemeral Jenkins instance (optional)</h3>
<div class="paragraph">
<p>Sometimes, JCasC might not be able to provide the configurations you need.
In this case, refer to <a href="../../user-docs/2.426.1/managing/groovy-hook-scripts.html" class="xref page">Groovy Hook Scripts</a> to set up the ephemeral Jenkins instance.
These Groovy scripts will have full access to the ephemeral Jenkins server and will be executed right after Jenkins starts up.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This option and its core are still in progress, so it’s not mentioned in the Jenkinsfile Runner GitHub Actions official guide.
However, it does work and can be used at this time.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In this example, we review how to use Groovy scripts to set up the Jenkins instance:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a directory, for example <code>groovy.init.d</code>, to store all your Groovy setup scripts.</p>
</li>
<li>
<p>Create a Groovy file called <code>test.groovy</code>.</p>
<div class="ulist">
<ul>
<li>
<p>Do not name it <code>init.groovy</code> because this name is already occupied.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Add the debug output:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">println 'Hello Groovy Hooks!'</code></pre>
</div>
</div>
</li>
<li>
<p>Specify the <code>groovy.init.d</code> directory in the GitHub Actions input.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">uses:
  jenkinsci/jfr-container-action@master
with:
  command: run
  jenkinsfile: Jenkinsfile
  pluginstxt: plugins.txt
  jcasc: jcasc.yml
  initHook: groovy.init.d</code></pre>
</div>
</div>
</li>
<li>
<p>Check the GitHub Actions log and verify that the groovy script is executed right after Jenkins starts up, before the actual pipeline is run.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_integrate_with_other_github_actions_optional"><a class="anchor" href="#_integrate_with_other_github_actions_optional"></a>Integrate with other GitHub Actions (optional)</h3>
<div class="paragraph">
<p>You can integrate this process with other GitHub Actions in the marketplace, via Jenkinsfile Runner GitHub Actions.
However, if the starting time of the Jenkins container is different in these GitHub Actions, some GitHub Actions cannot be used.
In other words, <code>jfr-static-image-action</code> cannot be integrated with other GitHub Actions <em>except</em> <code>actions/checkout</code>.
However, you can integrate other GitHub Actions with <code>jfr-container-action</code> and <code>jfr-runtime-action</code>.
Refer to their differences in <a href="https://jenkinsci.github.io/jfr-action-doc/docs/user-guide/actions-cmp.html">the official guide</a>.</p>
</div>
<div class="paragraph">
<p>In this example, we review how to integrate the "actions/setup-node" GitHub Action with <code>jfr-runtime-action</code> to compile a JavaScript project:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use an Ubuntu runner for the job.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">jobs:
  job-name:
    runs-on: ubuntu-latest</code></pre>
</div>
</div>
</li>
<li>
<p>Call the <code>actions/checkout@v2</code> to pull your codes into the runner.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">- uses: actions/checkout@v2</code></pre>
</div>
</div>
</li>
<li>
<p>Call the <code>actions/setup-node@v3</code> to set up node 18.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">- uses: actions/setup-node@v3
  with:
    node-version: 18</code></pre>
</div>
</div>
</li>
<li>
<p>Call the <code>jenkinsci/jfr-setup-action@master</code> to set up Jenkins.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">- uses: jenkinsci/jfr-setup-action@master</code></pre>
</div>
</div>
</li>
<li>
<p>Call the <code>jenkinsci/jfr-plugin-installation-action@master</code> to install additional plugins.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">- uses: jenkinsci/jfr-plugin-installation-action@master
  with:
      pluginstxt: plugins.txt</code></pre>
</div>
</div>
</li>
<li>
<p>Call the <code>jenkinsci/jfr-runtime-action@master</code> to run the Jenkins pipeline.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">- uses: jenkinsci/jfr-runtime-action@master
  with:
    command: run
    jenkinsfile: Jenkinsfile</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Refer to the <a href="https://github.com/jenkinsci/jfr-action-demo/tree/master/demo/javascript/my-react-app">official repository</a> for the full example.</p>
</div>
</div>
<div class="sect2">
<h3 id="_wrapping_up"><a class="anchor" href="#_wrapping_up"></a>Wrapping up</h3>
<div class="paragraph">
<p>Well done!
You have now built your project by using Jenkinsfile Runner GitHub Actions!</p>
</div>
<div class="paragraph">
<p>When you want to make your ephemeral Jenkins instances in the GitHub Actions more extensible, you can refer to the <a href="https://jenkinsci.github.io/jfr-action-doc/">official guide</a> for more details.
The official guide shows the parameters of these GitHub Actions, their comparisons, and other advanced functionality.
You can also find additional examples in the <a href="https://github.com/jenkinsci/jfr-action-demo">official demo repository</a>.</p>
</div>
<div class="paragraph">
<p>To learn more about the contributions of Jenkinsfile Runner GitHub Actions, refer to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="/blog/2022/09/07/jenkinsfile-runner-as-github-actions/">The related GSoC blog post</a></p>
</li>
<li>
<p><a href="https://jenkinsci.github.io/jfr-action-doc/developer-guide">The official developer guide</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="build-a-node-js-and-react-app-with-npm.html">Build a Node.js and React app with npm</a></span>
  <span class="next"><a href="tutorial-for-installing-jenkins-on-AWS.html">Jenkins on AWS</a></span>
</nav>
</article>
  </div>
</main>
</div>
<jio-footer></jio-footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
