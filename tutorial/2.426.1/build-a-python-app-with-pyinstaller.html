<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Build a Python app with PyInstaller :: Jenkins Docs</title>
    <link rel="canonical" href="https://docs.jenkins.com/tutorial/2.426.1/build-a-python-app-with-pyinstaller.html">
    <link rel="prev" href="tutorial-for-installing-jenkins-on-AWS.html">
    <link rel="next" href="create-a-pipeline-in-blue-ocean.html">
    <meta name="generator" content="Antora 3.1.5">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
<link rel="icon" href="../../_/jenkins.svg" type="image/x-icon">
  </head>
  <body class="article">
<script type="module" src="https://unpkg.com/@jenkinsci/jenkins-io-components?module"></script>
<jio-navbar style="  position: fixed;
  top: 0;
  width: 100vw;
  z-index: 100;"></jio-navbar>
  <div class="body">
<div class="nav-container" data-component="tutorial" data-version="2.426.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Jenkins Tutorials</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index.html">Tutorials overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tutorials-for-installing-jenkins-on-Google-Cloud.html">Jenkins on Google Cloud</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="build-a-java-app-with-maven.html">Build a Java app with Maven</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="build-a-multibranch-pipeline-project.html">End-to-End Multibranch Pipeline Project Creation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="build-a-node-js-and-react-app-with-npm.html">Build a Node.js and React app with npm</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="using-jenkinsfile-runner-github-action-to-build-jenkins-pipeline.html">Build a Jenkins pipeline by using Jenkinsfile Runner GitHub Actions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tutorial-for-installing-jenkins-on-AWS.html">Jenkins on AWS</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="build-a-python-app-with-pyinstaller.html">Build a Python app with PyInstaller</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="create-a-pipeline-in-blue-ocean.html">Create a Pipeline in Blue Ocean</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="build-a-labview-app.html">Build a LabVIEW app</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Jenkins Tutorials</span>
    <span class="version">2.426.1</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../about/index.html">About Jenkins</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../about/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../images/index.html">All of Jenkins Images</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../images/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../books/index.html">Jenkins Books</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../books/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../community/index.html">Jenkins Community</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../community/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../dev-docs/index.html">Jenkins Developer Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../dev-docs/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../download/latest/index.html">Jenkins Download and Deployment</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../download/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../events/index.html">Jenkins Events</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../events/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../Jenkins%20Project/index.html">Jenkins Project</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../Jenkins%20Project/index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../projects/index.html">Jenkins Projects</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../projects/index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../security/index.html">Jenkins Security Advisories</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../security/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../solutions/2.426.1/index.html">Jenkins Solutions Page</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../solutions/2.426.1/index.html">2.426.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../sigs/index.html">Jenkins Special Interest Groups</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../sigs/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="index.html">Jenkins Tutorials</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">2.426.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../user-docs/2.426.1/index.html">Jenkins User Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../user-docs/2.426.1/index.html">2.426.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../user-docs/2.426.1/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Jenkins Tutorials</a></li>
    <li><a href="build-a-python-app-with-pyinstaller.html">Build a Python app with PyInstaller</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/Vandit1604/jenkins-docs/edit/main/docs/tutorials/modules/ROOT/pages/build-a-python-app-with-pyinstaller.adoc"><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"/></svg>  Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Build a Python app with PyInstaller</h1>
<div class="admonitionblock note">
    <table>
        <tbody>
            <tr>
                <td class="icon"> <i class="fa icon-note" title="Note"></i> </td>
                <td class="content">
                    <div class="paragraph">
                        <p>This site is the new docs site currently being tested. For the actual docs in use please go to <a href="https://www.jenkins.io/doc/">https://www.jenkins.io/doc</a>.</p>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial shows you how to use Jenkins to orchestrate building a simple
Python application with <a href="https://www.pyinstaller.org/">PyInstaller</a>.</p>
</div>
<div class="paragraph">
<p>If you are a Python developer who is new to CI/CD concepts, or you might be
familiar with these concepts but don&#8217;t know how to implement building your
application using Jenkins, then this tutorial is for you.</p>
</div>
<div class="paragraph">
<p>The simple Python application (which you&#8217;ll obtain from a sample repository on
GitHub) is a command line tool "add2vals" that outputs the addition of two
values. If at least one of the values is a string, "add2vals" treats both values
as a string and instead concatenates the values. The "add2" function in the
"calc" library (which "add2vals" imports) is accompanied by a set of unit tests.
These are tested with pytest to check that this function works as expected and
the results are saved to a JUnit XML report.</p>
</div>
<div class="paragraph">
<p>The delivery of the "add2vals" tool through PyInstaller converts this tool into
a standalone executable file for Linux, which you can download through Jenkins
and execute at the command line on Linux machines without Python.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> Unlike the <a href="..">other tutorials</a> in this documentation, this tutorial
requires approximately 500 MB more Docker image data to be downloaded.</p>
</div>
<div class="paragraph">
<p><strong>Duration:</strong> This tutorial takes 20-40 minutes to complete (assuming you&#8217;ve
already met the <a href="#prerequisites">prerequisites</a> below). The exact duration will
depend on the speed of your machine and whether or not you&#8217;ve already
<a href="#run-jenkins-in-docker">run Jenkins in Docker</a> from <a href="..">another tutorial</a>.</p>
</div>
<div class="paragraph">
<p>You can stop this tutorial at any point in time and continue from where you left
off.</p>
</div>
<div class="paragraph">
<p>If you&#8217;ve already run though <a href="..">another tutorial</a>, you can skip the
<a href="#prerequisites">Prerequisites</a> and <a href="#run-jenkins-in-docker">Run Jenkins in
Docker</a> sections below and proceed on to <a href="#fork-sample-repository">forking the
sample repository</a>. (Just ensure you have
<a href="https://git-scm.com/downloads">Git</a> installed locally.) If you need to
restart Jenkins, simply follow the restart instructions in
<a href="#stopping-and-restarting-jenkins">Stopping and restarting Jenkins</a> and then
proceed on.</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/build-a-python-app-with-pyinstaller.adoc - include::doc/tutorials/_prerequisites.adoc[]
** <a href="https://git-scm.com/downloads">Git</a> and optionally
   <a href="https://desktop.github.com/">GitHub Desktop</a></p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/build-a-python-app-with-pyinstaller.adoc - include::doc/book/installing/_run-jenkins-in-docker.adoc[]</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="fork-and-clone-the-sample-repository-on-github"><a class="anchor" href="#fork-and-clone-the-sample-repository-on-github"></a>Fork and clone the sample repository</h3>
<div class="paragraph">
<p>Obtain the simple "add" Python application from GitHub, by forking the sample
repository of the application&#8217;s source code into your own GitHub account and
then cloning this fork locally.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure you are signed in to your GitHub account. If you don&#8217;t yet have a
GitHub account, sign up for a free one on the <a href="https://github.com/">GitHub
website</a>.</p>
</li>
<li>
<p>Fork the
<a href="https://github.com/jenkins-docs/simple-python-pyinstaller-app"><code>simple-python-pyinstaller-app</code></a>
on GitHub into your local GitHub account. If you need help with this process,
refer to the <a href="https://help.github.com/articles/fork-a-repo/">Fork A Repo</a>
documentation on the GitHub website for more information.</p>
</li>
<li>
<p>Clone your forked <code>simple-python-pyinstaller-app</code> repository (on GitHub)
locally to your machine. To begin this process, do either of the following
(where <code>&lt;your-username&gt;</code> is the name of your user account on your operating
system):</p>
<div class="ulist">
<ul>
<li>
<p>If you have the GitHub Desktop app installed on your machine:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In GitHub, click the green <strong>Clone or download</strong> button on your forked
repository, then <strong>Open in Desktop</strong>.</p>
</li>
<li>
<p>In GitHub Desktop, before clicking <strong>Clone</strong> on the <strong>Clone a Repository</strong> dialog
box, ensure <strong>Local Path</strong> for:</p>
<div class="ulist">
<ul>
<li>
<p>macOS is <code>/Users/&lt;your-username&gt;/Documents/GitHub/simple-python-pyinstaller-app</code></p>
</li>
<li>
<p>Linux is <code>/home/&lt;your-username&gt;/GitHub/simple-python-pyinstaller-app</code></p>
</li>
<li>
<p>Windows is <code>C:\Users\&lt;your-username&gt;\Documents\GitHub\simple-python-pyinstaller-app</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Otherwise:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Open up a terminal/command line prompt and <code>cd</code> to the appropriate directory
on:</p>
<div class="ulist">
<ul>
<li>
<p>macOS - <code>/Users/&lt;your-username&gt;/Documents/GitHub/</code></p>
</li>
<li>
<p>Linux - <code>/home/&lt;your-username&gt;/GitHub/</code></p>
</li>
<li>
<p>Windows - <code>C:\Users\&lt;your-username&gt;\Documents\GitHub\</code> (although use a Git
bash command line window as opposed to the usual Microsoft command prompt)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Run the following command to continue/complete cloning your forked repo:<br>
<code>git clone https://github.com/YOUR-GITHUB-ACCOUNT-NAME/simple-python-pyinstaller-app</code><br>
where <code>YOUR-GITHUB-ACCOUNT-NAME</code> is the name of your GitHub account.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_create_your_pipeline_project_in_jenkins"><a class="anchor" href="#_create_your_pipeline_project_in_jenkins"></a>Create your Pipeline project in Jenkins</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go back to Jenkins, log in again if necessary and click <strong>create new jobs</strong>
under <strong>Welcome to Jenkins!</strong><br>
<strong>Note:</strong> If you don&#8217;t see this, click <strong>New Item</strong> at the top left.</p>
</li>
<li>
<p>In the <strong>Enter an item name</strong> field, specify the name for your new Pipeline
project (e.g. <code>simple-python-pyinstaller-app</code>).</p>
</li>
<li>
<p>Scroll down and click <strong>Pipeline</strong>, then click <strong>OK</strong> at the end of the page.</p>
</li>
<li>
<p>( <em>Optional</em> ) On the next page, specify a brief description for your Pipeline
in the <strong>Description</strong> field (e.g. <code>An entry-level Pipeline demonstrating how to
use Jenkins to build a simple Python application with PyInstaller.</code>)</p>
</li>
<li>
<p>Click the <strong>Pipeline</strong> tab at the top of the page to scroll down to the
<strong>Pipeline</strong> section.</p>
</li>
<li>
<p>From the <strong>Definition</strong> field, choose the <strong>Pipeline script from SCM</strong> option.
This option instructs Jenkins to obtain your Pipeline from Source Control
Management (SCM), which will be your locally cloned Git repository.</p>
</li>
<li>
<p>From the <strong>SCM</strong> field, choose <strong>Git</strong>.</p>
</li>
<li>
<p>In the <strong>Repository URL</strong> field, specify the directory path of your locally
cloned repository <a href="#fork-sample-repository">above</a>,
which is from your user account/home directory on your host machine, mapped to
the <code>/home</code> directory of the Jenkins container - i.e.</p>
<div class="ulist">
<ul>
<li>
<p>For macOS - <code>/home/Documents/GitHub/simple-python-pyinstaller-app</code></p>
</li>
<li>
<p>For Linux - <code>/home/GitHub/simple-python-pyinstaller-app</code></p>
</li>
<li>
<p>For Windows - <code>/home/Documents/GitHub/simple-python-pyinstaller-app</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Save</strong> to save your new Pipeline project. You&#8217;re now ready to begin
creating your <code>Jenkinsfile</code>, which you&#8217;ll be checking into your locally cloned
Git repository.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_create_your_initial_pipeline_as_a_jenkinsfile"><a class="anchor" href="#_create_your_initial_pipeline_as_a_jenkinsfile"></a>Create your initial Pipeline as a Jenkinsfile</h3>
<div class="paragraph">
<p>You&#8217;re now ready to create your Pipeline that will automate building your Python
application with PyInstaller in Jenkins. Your Pipeline will be created as a
<code>Jenkinsfile</code>, which will be committed to your locally cloned Git repository
(<code>simple-python-pyinstaller-app</code>).</p>
</div>
<div class="paragraph">
<p>This is the foundation of "Pipeline-as-Code", which treats the continuous
delivery pipeline a part of the application to be versioned and reviewed like
any other code. Read more about Pipeline and what a Jenkinsfile is in the
<a href="../../user-docs/2.426.1/pipeline/index.html" class="xref page">Pipeline</a> and <a href="../../user-docs/2.426.1/pipeline/jenkinsfile.html" class="xref page">Using
a Jenkinsfile</a> sections of the User Handbook.</p>
</div>
<div class="paragraph">
<p>First, create an initial Pipeline with a "Build" stage that executes the first
part of the entire production process for your application. This "Build" stage
downloads a Python Docker image and runs it as a Docker container, which in turn
compiles your simple Python application into byte code.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Using your favorite text editor or IDE, create and save new text file with the
name <code>Jenkinsfile</code> at the root of your local <code>simple-python-pyinstaller-app</code>
Git repository.</p>
</li>
<li>
<p>Copy the following Declarative Pipeline code and paste it into your empty
<code>Jenkinsfile</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">pipeline {
    agent none <i class="conum" data-value="1"></i><b>(1)</b>
    stages {
        stage('Build') { <i class="conum" data-value="2"></i><b>(2)</b>
            agent {
                docker {
                    image 'python:3.12.0-alpine3.18' <i class="conum" data-value="3"></i><b>(3)</b>
                }
            }
            steps {
                sh 'python -m py_compile sources/add2vals.py sources/calc.py' <i class="conum" data-value="4"></i><b>(4)</b>
                stash(name: 'compiled-results', includes: 'sources/*.py*') <i class="conum" data-value="5"></i><b>(5)</b>
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <a href="../../user-docs/2.426.1/pipeline/syntax.html#agent" class="xref page"><code>agent</code></a> section with the <code>none</code>
parameter specified at the top of this Pipeline code block means that no global
agent will be allocated for the entire Pipeline&#8217;s execution and that each
<a href="../../user-docs/2.426.1/pipeline/syntax.html#stage" class="xref page"><code>stage</code></a> directive must specify its own
<code>agent</code> section.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Defines a <a href="../../user-docs/2.426.1/pipeline/syntax.html#stage" class="xref page"><code>stage</code></a> (directive) called
<code>Build</code> that appears on the Jenkins UI.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This <code>image</code> parameter (of the <a href="../../user-docs/2.426.1/pipeline/syntax.html#agent" class="xref page"><code>agent</code></a>
section&#8217;s <code>docker</code> parameter) downloads the
<a href="https://hub.docker.com/_/python/"><code>python:2-alpine</code> Docker image</a> (if it&#8217;s not
already available on your machine) and runs this image as a separate container.
This means that:
<div class="ulist">
<ul>
<li>
<p>You&#8217;ll have separate Jenkins and Python containers running locally in Docker.</p>
</li>
<li>
<p>The Python container becomes the <a href="../../user-docs/2.426.1/glossary/index.html#agent" class="xref page">agent</a> that
Jenkins uses to run the <code>Build</code> stage of your Pipeline project. However,
this container is short-lived - its lifespan is only that of the duration of
your <code>Build</code> stage&#8217;s execution.</p>
</li>
</ul>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>This
<a href="/doc/pipeline/steps/workflow-durable-task-step/#sh-shell-script"><code>sh</code></a>
step (of the <a href="../../user-docs/2.426.1/pipeline/syntax.html#steps" class="xref page"><code>steps</code></a> section) runs the
Python command to compile your application and its <code>calc</code> library into byte code
files (each with <code>.pyc</code> extension), which are placed into the <code>sources</code>
workspace directory (within the
<code>/var/jenkins_home/workspace/simple-python-pyinstaller-app</code> directory in the
Jenkins container).</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>This
<a href="/doc/pipeline/steps/workflow-basic-steps/#stash-stash-some-files-to-be-used-later-in-the-build"><code>stash</code></a>
step (of the <a href="/doc/pipeline/steps/workflow-basic-steps"><code>basic steps</code></a> section) saves
the Python source code and compiled byte code files (with <code>.pyc</code> extension) from the <code>sources</code>
workspace directory for use in later stages.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Save your edited <code>Jenkinsfile</code> and commit it to your local
<code>simple-python-pyinstaller-app</code> Git repository. E.g. Within the
<code>simple-python-pyinstaller-app</code> directory, run the commands:<br>
<code>git add .</code><br>
then<br>
<code>git commit -m "Add initial Jenkinsfile"</code></p>
</li>
<li>
<p>Go back to Jenkins again, log in again if necessary and click <strong>Open Blue
Ocean</strong> on the left to access Jenkins&#8217;s Blue Ocean interface.</p>
</li>
<li>
<p>In the <strong>This job has not been run</strong> message box, click <strong>Run</strong>, then quickly
click the <strong>OPEN</strong> link which appears briefly at the lower-right to see Jenkins
running your Pipeline project. If you weren&#8217;t able to click the <strong>OPEN</strong> link,
click the row on the main Blue Ocean interface to access this feature.<br>
<strong>Note:</strong> You may need to wait a few minutes for this first run to complete.
After making a clone of your local <code>simple-python-pyinstaller-app</code> Git
repository itself, Jenkins:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Initially queues the project to be run on the agent.</p>
</li>
<li>
<p>Runs the <code>Build</code> stage (defined in the <code>Jenkinsfile</code>) on the Python
container. During this time, Python uses the <code>py_compile</code> module to compile
the code of your Python application and its <code>calc</code> library into byte code,
which are stored in the <code>sources</code> workspace directory (within the Jenkins
home directory).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The Blue Ocean interface turns green if Jenkins compiled your Python application
successfully.</p>
</div>
<div class="paragraph boxshadow">
<p><span class="image unresolved"><img src="tutorials/python-pyinstaller-02-initial-pipeline-runs-successfully-step-opened.png" alt="Initial Pipeline runs successfully" width="100%"></span></p>
</div>
</li>
<li>
<p>Click the <strong>X</strong> at the top-right to return to the main Blue Ocean interface.</p>
<div class="paragraph boxshadow">
<p><span class="image unresolved"><img src="tutorials/python-pyinstaller-03-main-blue-ocean-interface.png" alt="Main Blue Ocean interface" width="100%"></span></p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_add_a_test_stage_to_your_pipeline"><a class="anchor" href="#_add_a_test_stage_to_your_pipeline"></a>Add a test stage to your Pipeline</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go back to your text editor/IDE and ensure your <code>Jenkinsfile</code> is open.</p>
</li>
<li>
<p>Copy and paste the following Declarative Pipeline syntax immediately under the
<code>Build</code> stage of your <code>Jenkinsfile</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">        stage('Test') {
            agent {
                docker {
                    image 'qnib/pytest'
                }
            }
            steps {
                sh 'py.test --junit-xml test-reports/results.xml sources/test_calc.py'
            }
            post {
                always {
                    junit 'test-reports/results.xml'
                }
            }
        }</code></pre>
</div>
</div>
<div class="paragraph">
<p>so that you end up with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">pipeline {
    agent none
    stages {
        stage('Build') {
            agent {
                docker {
                    image 'python:3.12.0-alpine3.18'
                }
            }
            steps {
                sh 'python -m py_compile sources/add2vals.py sources/calc.py'
                stash(name: 'compiled-results', includes: 'sources/*.py*')
            }
        }
        stage('Test') { <i class="conum" data-value="1"></i><b>(1)</b>
            agent {
                docker {
                    image 'qnib/pytest' <i class="conum" data-value="2"></i><b>(2)</b>
                }
            }
            steps {
                sh 'py.test --junit-xml test-reports/results.xml sources/test_calc.py' <i class="conum" data-value="3"></i><b>(3)</b>
            }
            post {
                always {
                    junit 'test-reports/results.xml' <i class="conum" data-value="4"></i><b>(4)</b>
                }
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Defines a <a href="../../user-docs/2.426.1/pipeline/syntax.html#stage" class="xref page"><code>stage</code></a> (directive) called
<code>Test</code> that appears on the Jenkins UI.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This <code>image</code> parameter (of the <a href="../../user-docs/2.426.1/pipeline/syntax.html#agent" class="xref page"><code>agent</code></a>
section&#8217;s <code>docker</code> parameter) downloads the
<a href="https://hub.docker.com/r/qnib/pytest/"><code>qnib:pytest</code> Docker image</a> (if it&#8217;s not
already available on your machine) and runs this image as a separate container.
This means that:
<div class="ulist">
<ul>
<li>
<p>You&#8217;ll have separate Jenkins and pytest containers running locally in Docker.</p>
</li>
<li>
<p>The pytest container becomes the <a href="../../user-docs/2.426.1/glossary/index.html#agent" class="xref page">agent</a> that
Jenkins uses to run the <code>Test</code> stage of your Pipeline project. This
container&#8217;s lifespan lasts the duration of your <code>Test</code> stage&#8217;s execution.</p>
</li>
</ul>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This
<a href="/doc/pipeline/steps/workflow-durable-task-step/#sh-shell-script"><code>sh</code></a>
step (of the <a href="../../user-docs/2.426.1/pipeline/syntax.html#steps" class="xref page"><code>steps</code></a> section) executes
pytest&#8217;s <code>py.test</code> command on <code>sources/test_calc.py</code>, which runs a set of unit
tests (defined in <code>test_calc.py</code>) on the "calc" library&#8217;s <code>add2</code> function (used
by your simple Python application <code>add2vals</code>). The:
<div class="ulist">
<ul>
<li>
<p><code>--junit-xml test-reports/results.xml</code> option makes <code>py.test</code> generate a JUnit
XML report, which is saved to <code>test-reports/results.xml</code> (within the
<code>/var/jenkins_home/workspace/simple-python-pyinstaller-app</code> directory in the
Jenkins container).</p>
</li>
</ul>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>This
<a href="/doc/pipeline/steps/junit/#junit-archive-junit-formatted-test-results"><code>junit</code></a>
step (provided by the <a href="/doc/pipeline/steps/junit">JUnit Plugin</a>) archives the
JUnit XML report (generated by the <code>py.test</code> command above) and exposes the
results through the Jenkins interface. In Blue Ocean, the results are accessible
through the <strong>Tests</strong> page of a Pipeline run. The
<a href="../../user-docs/2.426.1/pipeline/syntax.html#post" class="xref page"><code>post</code></a> section&#8217;s <code>always</code> condition that
contains this <code>junit</code> step ensures that the step is <em>always</em> executed <em>at the
completion</em> of the <code>Test</code> stage, regardless of the stage&#8217;s outcome.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Save your edited <code>Jenkinsfile</code> and commit it to your local
<code>simple-python-pyinstaller-app</code> Git repository. E.g. Within the
<code>simple-python-pyinstaller-app</code> directory, run the commands:<br>
<code>git stage .</code><br>
then<br>
<code>git commit -m "Add 'Test' stage"</code></p>
</li>
<li>
<p>Go back to Jenkins again, log in again if necessary and ensure you&#8217;ve accessed
Jenkins&#8217;s Blue Ocean interface.</p>
</li>
<li>
<p>Click <strong>Run</strong> at the top left, then quickly click the <strong>OPEN</strong> link which appears
briefly at the lower-right to see Jenkins running your amended Pipeline
project. If you weren&#8217;t able to click the <strong>OPEN</strong> link, click the <em>top</em> row
on the Blue Ocean interface to access this feature.<br>
<strong>Note:</strong> It may take a few minutes for the <code>qnib:pytest</code> Docker image to
download (if this hasn&#8217;t already been done).<br>
If your amended Pipeline ran successfully, here&#8217;s what the Blue Ocean
interface should look like. Notice the additional "Test" stage. You can click
on the previous "Build" stage circle to access the output from that stage.</p>
<div class="paragraph boxshadow">
<p><span class="image unresolved"><img src="tutorials/python-pyinstaller-11-test-stage-runs-successfully-with-output.png" alt="Test stage runs successfully (with output)" width="100%"></span></p>
</div>
</li>
<li>
<p>Click the <strong>X</strong> at the top-right to return to the main Blue Ocean interface.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_add_a_final_deliver_stage_to_your_pipeline"><a class="anchor" href="#_add_a_final_deliver_stage_to_your_pipeline"></a>Add a final deliver stage to your Pipeline</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go back to your text editor/IDE and ensure your <code>Jenkinsfile</code> is open.</p>
</li>
<li>
<p>Copy and paste the following Declarative Pipeline syntax immediately under the
<code>Test</code> stage of your <code>Jenkinsfile</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">        stage('Deliver') {
            agent any
            environment {
                VOLUME = '$(pwd)/sources:/src'
                IMAGE = 'cdrx/pyinstaller-linux:python2'
            }
            steps {
                dir(path: env.BUILD_ID) {
                    unstash(name: 'compiled-results')
                    sh "docker run --rm -v ${VOLUME} ${IMAGE} 'pyinstaller -F add2vals.py'"
                }
            }
            post {
                success {
                    archiveArtifacts "${env.BUILD_ID}/sources/dist/add2vals"
                    sh "docker run --rm -v ${VOLUME} ${IMAGE} 'rm -rf build dist'"
                }
            }
        }</code></pre>
</div>
</div>
<div class="paragraph">
<p>and add a <code>skipStagesAfterUnstable</code> option so that you end up with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">pipeline {
    agent none
    options {
        skipStagesAfterUnstable()
    }
    stages {
        stage('Build') {
            agent {
                docker {
                    image 'python:3.12.0-alpine3.18'
                }
            }
            steps {
                sh 'python -m py_compile sources/add2vals.py sources/calc.py'
                stash(name: 'compiled-results', includes: 'sources/*.py*')
            }
        }
        stage('Test') {
            agent {
                docker {
                    image 'qnib/pytest'
                }
            }
            steps {
                sh 'py.test --junit-xml test-reports/results.xml sources/test_calc.py'
            }
            post {
                always {
                    junit 'test-reports/results.xml'
                }
            }
        }
        stage('Deliver') { <i class="conum" data-value="1"></i><b>(1)</b>
            agent any
            environment { <i class="conum" data-value="2"></i><b>(2)</b>
                VOLUME = '$(pwd)/sources:/src'
                IMAGE = 'cdrx/pyinstaller-linux:python2'
            }
            steps {
                dir(path: env.BUILD_ID) { <i class="conum" data-value="3"></i><b>(3)</b>
                    unstash(name: 'compiled-results') <i class="conum" data-value="4"></i><b>(4)</b>
                    sh "docker run --rm -v ${VOLUME} ${IMAGE} 'pyinstaller -F add2vals.py'" <i class="conum" data-value="5"></i><b>(5)</b>
                }
            }
            post {
                success {
                    archiveArtifacts "${env.BUILD_ID}/sources/dist/add2vals" <i class="conum" data-value="6"></i><b>(6)</b>
                    sh "docker run --rm -v ${VOLUME} ${IMAGE} 'rm -rf build dist'"
                }
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Defines a <a href="../../user-docs/2.426.1/pipeline/syntax.html#stage" class="xref page"><code>stage</code></a> (directive) called
<code>Deliver</code> that appears on the Jenkins UI.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This
<a href="/doc/pipeline/tour/environment/"><code>environment</code></a>
block defines two variables which will be used later in the 'Deliver' stage.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This
<a href="/doc/pipeline/steps/workflow-basic-steps/#dir-change-current-directory"><code>dir</code></a>
step (of the <a href="/doc/pipeline/steps/workflow-basic-steps"><code>basic steps</code></a> section) creates a new subdirectory
named by the build number. The final program will be created in that directory by pyinstaller.
<code>BUILD_ID</code> is one of the pre-defined Jenkins <a href="../../user-docs/2.426.1/pipeline/jenkinsfile.html#using-environment-variables" class="xref page">environment variables</a> and is available in all jobs.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>This
<a href="/doc/pipeline/steps/workflow-basic-steps/#unstash-restore-files-previously-stashed"><code>unstash</code></a>
step (of the <a href="/doc/pipeline/steps/workflow-basic-steps"><code>basic steps</code></a> section) restores
the Python source code and compiled byte code files (with <code>.pyc</code> extension) from the previously saved stash
image (if it&#8217;s not already available on your machine) and runs this image as a
separate container. This means that:
<div class="ulist">
<ul>
<li>
<p>You&#8217;ll have separate Jenkins and PyInstaller (for Linux) containers running
locally in Docker.</p>
</li>
<li>
<p>The PyInstaller container becomes the <a href="../../user-docs/2.426.1/glossary/index.html#agent" class="xref page">agent</a>
that Jenkins uses to run the <code>Deliver</code> stage of your Pipeline project. This
container&#8217;s lifespan lasts the duration of your <code>Deliver</code> stage&#8217;s execution.</p>
</li>
</ul>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>This
<a href="/doc/pipeline/steps/workflow-durable-task-step/#sh-shell-script"><code>sh</code></a>
step (of the <a href="../../user-docs/2.426.1/pipeline/syntax.html#steps" class="xref page"><code>steps</code></a> section) executes
the <code>pyinstaller</code> command (in the PyInstaller container) on your simple Python
application. This bundles your <code>add2vals.py</code> Python application into a single
standalone executable file (via the <code>--onefile</code> option) and outputs the this
file to the <code>dist</code> workspace directory (within the Jenkins home directory).
Although this step consists of a single command, as a general principle, it&#8217;s a
good idea to keep your Pipeline code (i.e. the <code>Jenkinsfile</code>) as tidy as
possible and place more complex build steps (particularly for stages consisting
of 2 or more steps) into separate shell script files like the <code>deliver.sh</code> file.
This ultimately makes maintaining your Pipeline code easier, especially if your
Pipeline gains more complexity.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>This
<a href="/doc/pipeline/steps/core/#archiveArtifacts-archive-the-artifacts"><code>archiveArtifacts</code></a>
step (provided as part of Jenkins core) archives the standalone executable file
(generated by the <code>pyinstaller</code> command above at <code>dist/add2vals</code> within the
Jenkins home&#8217;s workspace directory) and exposes this file through the Jenkins
interface. In Blue Ocean, archived artifacts like these are accessible through
the <strong>Artifacts</strong> page of a Pipeline run. The
<a href="../../user-docs/2.426.1/pipeline/syntax.html#post" class="xref page"><code>post</code></a> section&#8217;s <code>success</code> condition that
contains this <code>archiveArtifacts</code> step ensures that the step is executed <em>at the
completion</em> of the <code>Deliver</code> stage <em>only if</em> this stage completed successfully.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Save your edited <code>Jenkinsfile</code> and commit it to your local
<code>simple-python-pyinstaller-app</code> Git repository. E.g. Within the
<code>simple-python-pyinstaller-app</code> directory, run the commands:<br>
<code>git stage .</code><br>
then<br>
<code>git commit -m "Add 'Deliver' stage"</code></p>
</li>
<li>
<p>Go back to Jenkins again, log in again if necessary and ensure you&#8217;ve accessed
Jenkins&#8217;s Blue Ocean interface.</p>
</li>
<li>
<p>Click <strong>Run</strong> at the top left, then quickly click the <strong>OPEN</strong> link which appears
briefly at the lower-right to see Jenkins running your amended Pipeline
project. If you weren&#8217;t able to click the <strong>OPEN</strong> link, click the <em>top</em> row
on the Blue Ocean interface to access this feature.<br>
<strong>Note:</strong> It may take a few minutes for the <code>cdrx/pyinstaller-linux</code> Docker
image to download (if this hasn&#8217;t already been done).<br>
If your amended Pipeline ran successfully, here&#8217;s what the Blue Ocean
interface should look like. Notice the additional "Deliver" stage. Click on
the previous "Test" and "Build" stage circles to access the outputs from those
stages.</p>
<div class="paragraph boxshadow">
<p><span class="image unresolved"><img src="tutorials/python-pyinstaller-21-deliver-stage-runs-successfully.png" alt="Deliver stage runs successfully" width="100%"></span></p>
</div>
<div class="paragraph">
<p>Here&#8217;s what the output of the "Deliver" stage should look like, showing you the
results of PyInstaller bundling your Python application into a single standalone
executable file.</p>
</div>
<div class="paragraph boxshadow">
<p><span class="image unresolved"><img src="tutorials/python-pyinstaller-22-deliver-stage-output-only.png" alt="Deliver stage output only" width="100%"></span></p>
</div>
</li>
<li>
<p>Click the <strong>X</strong> at the top-right to return to the main Blue Ocean interface,
which lists your previous Pipeline runs in reverse chronological order.</p>
<div class="paragraph boxshadow">
<p><span class="image unresolved"><img src="tutorials/python-pyinstaller-23-main-blue-ocean-interface-with-all-previous-runs-displayed.png" alt="Main Blue Ocean interface with all previous runs displayed" width="100%"></span></p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_follow_up_optional"><a class="anchor" href="#_follow_up_optional"></a>Follow up (optional)</h3>
<div class="paragraph">
<p>If you use Linux, you can try running the standalone <code>add2vals</code> application you
generated with PyInstaller locally on your machine. To do this:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the main Blue Ocean interface, access your last Pipeline run you
performed <a href="#add-a-final-deliver-stage-to-your-pipeline">above</a>. To do this,
click the top row (representing the most recent Pipeline run) on the main Blue
Ocean&#8217;s <strong>Activity</strong> page.</p>
<div class="paragraph boxshadow">
<p><span class="image unresolved"><img src="tutorials/python-pyinstaller-23-main-blue-ocean-interface-with-all-previous-runs-displayed.png" alt="Main Blue Ocean interface with all previous runs displayed" width="100%"></span></p>
</div>
</li>
<li>
<p>On the results page of the Pipeline run, click <strong>Artifacts</strong> at the top right
to access the <strong>Artifacts</strong> page.</p>
<div class="paragraph boxshadow">
<p><span class="image unresolved"><img src="tutorials/python-pyinstaller-21-deliver-stage-runs-successfully.png" alt="Deliver stage runs successfully" width="100%"></span></p>
</div>
</li>
<li>
<p>In the list of artifacts, click the down-arrow icon at the far right of the
<strong>dist/add2vals</strong> artifact item to download the standalone executable file to
your browser&#8217;s "Downloads" directory.</p>
<div class="paragraph boxshadow">
<p><span class="image unresolved"><img src="tutorials/python-pyinstaller-24-deliver-stage-artifacts-page.png" alt="Deliver stage Artifacts page" width="100%"></span></p>
</div>
</li>
<li>
<p>Back in your operating system&#8217;s terminal prompt, <code>cd</code> to your browser&#8217;s
"Downloads" directory.</p>
</li>
<li>
<p>Make the <code>add2vals</code> file executable - i.e. <code>chmod a+x add2vals</code></p>
</li>
<li>
<p>Run the command <code>./add2vals</code> and follow the instructions provided by your app.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_wrapping_up"><a class="anchor" href="#_wrapping_up"></a>Wrapping up</h3>
<div class="paragraph">
<p>Well done! You&#8217;ve just used Jenkins to build a simple Python application!</p>
</div>
<div class="paragraph">
<p>The "Build", "Test" and "Deliver" stages you created above are the basis for
building more complex Python applications in Jenkins, as well as Python
applications that integrate with other technology stacks.</p>
</div>
<div class="paragraph">
<p>Because Jenkins is extremely extensible, it can be modified and configured to
handle practically any aspect of build orchestration and automation.</p>
</div>
<div class="paragraph">
<p>To learn more about what Jenkins can do, check out:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="#tutorials:ROOT:index.adoc" class="xref unresolved">Tutorials overview</a> page for other introductory
tutorials.</p>
</li>
<li>
<p>The <a href="../../user-docs/2.426.1/index.html" class="xref page">User Handbook</a> for more detailed information about using
Jenkins, such as <a href="../../user-docs/2.426.1/pipeline/index.html" class="xref page">Pipelines</a> (in particular
<a href="../../user-docs/2.426.1/pipeline/syntax.html" class="xref page">Pipeline syntax</a>) and the
<a href="../../user-docs/2.426.1/blueocean/index.html" class="xref page">Blue Ocean</a> interface.</p>
</li>
<li>
<p>The <a href="/node">Jenkins blog</a> for the latest events, other tutorials and
updates.</p>
</li>
</ul>
</div>
<hr>
Unresolved include directive in modules/ROOT/pages/build-a-python-app-with-pyinstaller.adoc - include::_partials/_feedback-footer.html[]
</div>
<nav class="pagination">
  <span class="prev"><a href="tutorial-for-installing-jenkins-on-AWS.html">Jenkins on AWS</a></span>
  <span class="next"><a href="create-a-pipeline-in-blue-ocean.html">Create a Pipeline in Blue Ocean</a></span>
</nav>
</article>
  </div>
</main>
</div>
<jio-footer></jio-footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
