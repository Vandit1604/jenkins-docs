<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Build a Java app with Maven :: Jenkins</title>
    <link rel="canonical" href="https://docs.jenkins.com/tutorial/2.401.3/build-a-java-app-with-maven.html">
    <link rel="prev" href="tutorials-for-installing-jenkins-on-Google-Cloud.html">
    <link rel="next" href="build-a-node-js-and-react-app-with-npm.html">
    <meta name="generator" content="Antora 3.1.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
<link rel="icon" href="../../_/jenkins.svg" type="image/x-icon">
  </head>
  <body class="article">
<script type="module" src="https://unpkg.com/@jenkinsci/jenkins-io-components?module"></script>
<jio-navbar style="  position: fixed;
  top: 0;
  width: 100vw;
  z-index: 100;"></jio-navbar>
  <div class="body">
<div class="nav-container" data-component="tutorial" data-version="2.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Jenkins Tutorials</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Tutorials overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tutorials-for-installing-jenkins-on-Google-Cloud.html">Jenkins on Google Cloud</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="build-a-java-app-with-maven.html">Build a Java app with Maven</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="build-a-node-js-and-react-app-with-npm.html">Build a Node.js and React app with npm</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="using-jenkinsfile-runner-github-action-to-build-jenkins-pipeline.html">Build a Jenkins pipeline by using Jenkinsfile Runner GitHub Actions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tutorial-for-installing-jenkins-on-AWS.html">Jenkins on AWS</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="build-a-multibranch-pipeline-project.html">End-to-End Multibranch Pipeline Project Creation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="build-a-python-app-with-pyinstaller.html">Build a Python app with PyInstaller</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="create-a-pipeline-in-blue-ocean.html">Create a Pipeline in Blue Ocean</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="build-a-labview-app.html">Build a LabVIEW app</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Jenkins Tutorials</span>
    <span class="version">2.1</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../about/index.html">About Jenkins</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../about/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../images/index.html">All of Jenkins Images</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../images/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../books/index.html">Jenkins Books</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../books/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../community/index.html">Jenkins Community</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../community/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../dev-docs/index.html">Jenkins Developer Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../dev-docs/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../download/latest/index.html">Jenkins Download and Deployment</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../download/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../events/index.html">Jenkins Events</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../events/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../Jenkins%20Project/index.html">Jenkins Project</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../Jenkins%20Project/index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../projects/index.html">Jenkins Projects</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../projects/index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../security/index.html">Jenkins Security Advisories</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../security/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../solutions/2.401.3/index.html">Jenkins Solutions Page</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../solutions/2.401.3/index.html">2.401.3</a>
        </li>
        <li class="version">
          <a href="../../solutions/2.2/index.html">2.2</a>
        </li>
        <li class="version">
          <a href="../../solutions/2.1/index.html">2.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../sigs/index.html">Jenkins Special Interest Groups</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../sigs/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../2.401.3/index.html">Jenkins Tutorials</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../2.401.3/index.html">2.401.3</a>
        </li>
        <li class="version">
          <a href="../2.2/index.html">2.2</a>
        </li>
        <li class="version is-current">
          <a href="index.html">2.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../user-docs/2.401.3/index.html">Jenkins User Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../user-docs/2.401.3/index.html">2.401.3</a>
        </li>
        <li class="version">
          <a href="../../user-docs/2.2/index.html">2.2</a>
        </li>
        <li class="version">
          <a href="../../user-docs/2.1/index.html">2.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../user-docs/2.401.3/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Jenkins Tutorials</a></li>
    <li><a href="index.html">Tutorials overview</a></li>
    <li><a href="build-a-java-app-with-maven.html">Build a Java app with Maven</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">2.1</button>
  <div class="version-menu">
    <a class="version" href="../2.401.3/build-a-java-app-with-maven.html">2.401.3</a>
    <a class="version" href="../2.2/build-a-java-app-with-maven.html">2.2</a>
    <a class="version is-current" href="build-a-java-app-with-maven.html">2.1</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/Vandit1604/jenkins-docs/edit/2.401.2/docs/tutorials/modules/ROOT/pages/build-a-java-app-with-maven.adoc"><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"/></svg>  Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Build a Java app with Maven</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial shows you how to use Jenkins to orchestrate building a simple Java
application with <a href="https://maven.apache.org/">Maven</a>.</p>
</div>
<div class="paragraph">
<p>If you are a Java developer who uses Maven and who is new to CI/CD concepts, or
you might be familiar with these concepts but don&#8217;t know how to implement
building your application using Jenkins, then this tutorial is for you.</p>
</div>
<div class="paragraph">
<p>The simple Java application (which you&#8217;ll obtain from a sample repository on
GitHub) outputs the string "Hello world!" and is accompanied by a couple of unit
tests to check that the main application works as expected. The results of these
tests are saved to a JUnit XML report.</p>
</div>
<div class="paragraph">
<p><strong>Duration:</strong> This tutorial takes 20-40 minutes to complete (assuming you&#8217;ve
already met the <a href="#partial$_prerequisites.adoc" class="xref unresolved">prerequisites</a> below). The exact duration will
depend on the speed of your machine and whether or not you&#8217;ve already
<a href="#run-jenkins-in-docker">run Jenkins in Docker</a> from <a href="index.html" class="xref page">another tutorial</a>.</p>
</div>
<div class="paragraph">
<p>You can stop this tutorial at any point in time and continue from where you left
off.</p>
</div>
<div class="paragraph">
<p>If you&#8217;ve already run through <a href="index.html" class="xref page">another tutorial</a>, you can skip the
<a href="#partial$_prerequisites.adoc" class="xref unresolved">prerequisites</a> and <a href="#run-jenkins-in-docker">Run Jenkins in
Docker</a> sections below and proceed on to <a href="#partial$_fork-sample-repository.adoc" class="xref unresolved">forking the
sample repository</a>. (Just ensure you have
<a href="https://git-scm.com/downloads">Git</a> installed locally.) If you need to
restart Jenkins, simply follow the restart instructions in
<a href="#user-docs:installing-jenkins:partials_setup-wizard-for-tutorials.adoc" class="xref unresolved">run Jenkins in Docker</a> and then
proceed on.</p>
</div>
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/build-a-java-app-with-maven.adoc - include::partial$_prerequisites.adoc[]
** <a href="https://git-scm.com/downloads">Git</a> and optionally
   <a href="https://desktop.github.com/">GitHub Desktop</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_run_jenkins_in_docker"><a class="anchor" href="#_run_jenkins_in_docker"></a>Run Jenkins in Docker</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this tutorial, you&#8217;ll be running Jenkins as a Docker container from the
<a href="https://hub.docker.com/r/jenkins/jenkins/"><code>jenkins/jenkins</code></a> Docker
image.</p>
</div>
<div class="paragraph">
<p>To run Jenkins in Docker, follow the relevant instructions below for either
<a href="#on-macos-and-linux">macOS and Linux</a> or <a href="#on-windows">Windows</a>.</p>
</div>
<div class="paragraph">
<p>You can read more about Docker container and image concepts in the <a href="#docker.adoc" class="xref unresolved">Docker</a>
section of the <a href="#installing-jenkins:index.adoc" class="xref unresolved">Installing Jenkins</a> page.</p>
</div>
<div class="paragraph">
<p><a href="#partial$_docker-for-tutorials.adoc" class="xref unresolved">partial$_docker-for-tutorials.adoc</a></p>
</div>
<div class="paragraph">
<p><a href="#partial$_setup-wizard-for-tutorials.adoc" class="xref unresolved">partial$_setup-wizard-for-tutorials.adoc</a></p>
</div>
<div class="sect2">
<h3 id="fork-and-clone-the-sample-repository-on-github"><a class="anchor" href="#fork-and-clone-the-sample-repository-on-github"></a>Fork and clone the sample repository</h3>
<div class="paragraph">
<p>Obtain the simple "Hello world!" Java application from GitHub, by forking the
sample repository of the application&#8217;s source code into your own GitHub account
and then cloning this fork locally.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure you are signed in to your GitHub account. If you don&#8217;t yet have a
GitHub account, sign up for a free one on the <a href="https://github.com/">GitHub
website</a>.</p>
</li>
<li>
<p>Fork the
<a href="https://github.com/jenkins-docs/simple-java-maven-app"><code>simple-java-maven-app</code></a>
on GitHub into your local GitHub account. If you need help with this process,
refer to the <a href="https://help.github.com/articles/fork-a-repo/">Fork A Repo</a>
documentation on the GitHub website for more information.</p>
</li>
<li>
<p>Clone your forked <code>simple-java-maven-app</code> repository (on GitHub) locally to
your machine. To begin this process, do either of the following (where
<code>&lt;your-username&gt;</code> is the name of your user account on your operating system):</p>
<div class="ulist">
<ul>
<li>
<p>If you have the GitHub Desktop app installed on your machine:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In GitHub, click the green <strong>Clone or download</strong> button on your forked
repository, then <strong>Open in Desktop</strong>.</p>
</li>
<li>
<p>In GitHub Desktop, before clicking <strong>Clone</strong> on the <strong>Clone a Repository</strong> dialog
box, ensure <strong>Local Path</strong> for:</p>
<div class="ulist">
<ul>
<li>
<p>macOS is <code>/Users/&lt;your-username&gt;/Documents/GitHub/simple-java-maven-app</code></p>
</li>
<li>
<p>Linux is <code>/home/&lt;your-username&gt;/GitHub/simple-java-maven-app</code></p>
</li>
<li>
<p>Windows is <code>C:\Users\&lt;your-username&gt;\Documents\GitHub\simple-java-maven-app</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Otherwise:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Open up a terminal/command line prompt and <code>cd</code> to the appropriate directory
on:</p>
<div class="ulist">
<ul>
<li>
<p>macOS - <code>/Users/&lt;your-username&gt;/Documents/GitHub/</code></p>
</li>
<li>
<p>Linux - <code>/home/&lt;your-username&gt;/GitHub/</code></p>
</li>
<li>
<p>Windows - <code>C:\Users\&lt;your-username&gt;\Documents\GitHub\</code> (although use a Git
bash command line window as opposed to the usual Microsoft command prompt)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Run the following command to continue/complete cloning your forked repo:<br>
<code>git clone https://github.com/YOUR-GITHUB-ACCOUNT-NAME/simple-java-maven-app</code><br>
where <code>YOUR-GITHUB-ACCOUNT-NAME</code> is the name of your GitHub account.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_create_your_pipeline_project_in_jenkins"><a class="anchor" href="#_create_your_pipeline_project_in_jenkins"></a>Create your Pipeline project in Jenkins</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go back to Jenkins, log in again if necessary and click <strong>create new jobs</strong>
under <strong>Welcome to Jenkins!</strong><br>
<strong>Note:</strong> If you don&#8217;t see this, click <strong>New Item</strong> at the top left.</p>
</li>
<li>
<p>In the <strong>Enter an item name</strong> field, specify the name for your new Pipeline
project (e.g. <code>simple-java-maven-app</code>).</p>
</li>
<li>
<p>Scroll down and click <strong>Pipeline</strong>, then click <strong>OK</strong> at the end of the page.</p>
</li>
<li>
<p>( <em>Optional</em> ) On the next page, specify a brief description for your Pipeline
in the <strong>Description</strong> field (e.g. <code>An entry-level Pipeline demonstrating how to
use Jenkins to build a simple Java application with Maven.</code>)</p>
</li>
<li>
<p>Click the <strong>Pipeline</strong> tab at the top of the page to scroll down to the
<strong>Pipeline</strong> section.</p>
</li>
<li>
<p>From the <strong>Definition</strong> field, choose the <strong>Pipeline script from SCM</strong> option.
This option instructs Jenkins to obtain your Pipeline from Source Control
Management (SCM), which will be your locally cloned Git repository.</p>
</li>
<li>
<p>From the <strong>SCM</strong> field, choose <strong>Git</strong>.</p>
</li>
<li>
<p>In the <strong>Repository URL</strong> field, specify the directory path of your locally
cloned repository <a href="#fork-sample-repository">above</a>,
which is from your user account/home directory on your host machine, mapped to
the <code>/home</code> directory of the Jenkins container - i.e.</p>
<div class="ulist">
<ul>
<li>
<p>For macOS - <code>/home/Documents/GitHub/simple-java-maven-app</code></p>
</li>
<li>
<p>For Linux - <code>/home/GitHub/simple-java-maven-app</code></p>
</li>
<li>
<p>For Windows - <code>/home/Documents/GitHub/simple-java-maven-app</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Save</strong> to save your new Pipeline project. You&#8217;re now ready to begin
creating your <code>Jenkinsfile</code>, which you&#8217;ll be checking into your locally cloned
Git repository.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_create_your_initial_pipeline_as_a_jenkinsfile"><a class="anchor" href="#_create_your_initial_pipeline_as_a_jenkinsfile"></a>Create your initial Pipeline as a Jenkinsfile</h3>
<div class="paragraph">
<p>You&#8217;re now ready to create your Pipeline that will automate building your Java
application with Maven in Jenkins. Your Pipeline will be created as a
<code>Jenkinsfile</code>, which will be committed to your locally cloned Git repository
(<code>simple-java-maven-app</code>).</p>
</div>
<div class="paragraph">
<p>This is the foundation of "Pipeline-as-Code", which treats the continuous
delivery pipeline as a part of the application to be versioned and reviewed like
any other code. Read more about Pipeline and what a Jenkinsfile is in the
<a href="/doc/book/pipeline">Pipeline</a> and <a href="/doc/book/pipeline/jenkinsfile">Using
a Jenkinsfile</a> sections of the User Handbook.</p>
</div>
<div class="paragraph">
<p>First, create an initial Pipeline to download a Maven Docker image and run it as
a Docker container (which will build your simple Java application). Also add a
"Build" stage to the Pipeline that begins orchestrating this whole process.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Using your favorite text editor or IDE, create and save new text file with the
name <code>Jenkinsfile</code> at the root of your local <code>simple-java-maven-app</code> Git
repository.</p>
</li>
<li>
<p>Copy the following Declarative Pipeline code and paste it into your empty
<code>Jenkinsfile</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">pipeline {
    agent {
        docker {
            image 'maven:3.9.0-eclipse-temurin-11' <i class="conum" data-value="1"></i><b>(1)</b>
            args '-v /root/.m2:/root/.m2' <i class="conum" data-value="2"></i><b>(2)</b>
        }
    }
    stages {
        stage('Build') { <i class="conum" data-value="3"></i><b>(3)</b>
            steps {
                sh 'mvn -B -DskipTests clean package' <i class="conum" data-value="4"></i><b>(4)</b>
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This <code>image</code> parameter (of the <a href="/doc/book/pipeline/syntax#agent"><code>agent</code></a>
section&#8217;s <code>docker</code> parameter) downloads the
<a href="https://hub.docker.com/_/maven/"><code>maven:3.9.0-eclipse-temurin-11</code> Docker image</a> (if it&#8217;s not
already available on your machine) and runs this image as a separate container.
This means that:
<div class="ulist">
<ul>
<li>
<p>You&#8217;ll have separate Jenkins and Maven containers running locally in Docker.</p>
</li>
<li>
<p>The Maven container becomes the <a href="/doc/book/glossary/#agent">agent</a> that
Jenkins uses to run your Pipeline project. However, this container is
short-lived - its lifespan is only that of the duration of your Pipeline&#8217;s
execution.</p>
</li>
</ul>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This <code>args</code> parameter creates a reciprocal mapping between the <code>/root/.m2</code>
(i.e. Maven repository) directories in the short-lived Maven Docker container
and that of your Docker host&#8217;s filesystem. Explaining the details behind this is
beyond the scope of this tutorial. However, the main reason for doing this is to
ensure that the artifacts necessary to build your Java application (which Maven
downloads while your Pipeline is being executed) are retained in the Maven
repository beyond the lifespan of the Maven container. This prevents Maven from
having to download the same artifacts during successive runs of your Jenkins
Pipeline, which you&#8217;ll be conducting later on. Be aware that unlike the Docker
data volume you created for <code>jenkins-data</code>
<a href="#download-and-run-jenkins-in-docker">above</a>, the Docker host&#8217;s filesystem is
effectively cleared out each time Docker is restarted. This means you&#8217;ll lose
the downloaded Maven repository artifacts each time Docker restarts.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Defines a <a href="/doc/book/pipeline/syntax/#stage"><code>stage</code></a> (directive) called
<code>Build</code> that appears on the Jenkins UI.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>This
<a href="/doc/pipeline/steps/workflow-durable-task-step/#code-sh-code-shell-script"><code>sh</code></a>
step (of the <a href="/doc/book/pipeline/syntax/#steps"><code>steps</code></a> section) runs the
Maven command to cleanly build your Java application (without running any
tests).</td>
</tr>
</table>
</div>
</li>
<li>
<p>Save your edited <code>Jenkinsfile</code> and commit it to your local
<code>simple-java-maven-app</code> Git repository. E.g. Within the
<code>simple-java-maven-app</code> directory, run the commands:<br>
<code>git add .</code><br>
then<br>
<code>git commit -m "Add initial Jenkinsfile"</code></p>
</li>
<li>
<p>Go back to Jenkins again, log in again if necessary and click <strong>Open Blue
Ocean</strong> on the left to access Jenkins&#8217;s Blue Ocean interface.</p>
</li>
<li>
<p>In the <strong>This job has not been run</strong> message box, click <strong>Run</strong>, then quickly
click the <strong>OPEN</strong> link which appears briefly at the lower-right to see Jenkins
running your Pipeline project. If you weren&#8217;t able to click the <strong>OPEN</strong> link,
click the row on the main Blue Ocean interface to access this feature.<br>
<strong>Note:</strong> You may need to wait several minutes for this first run to complete.
After making a clone of your local <code>simple-java-maven-app</code> Git repository
itself, Jenkins:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Initially queues the project to be run on the agent.</p>
</li>
<li>
<p>Downloads the Maven Docker image and runs it in a container on Docker.</p>
<div class="paragraph boxshadow">
<p><span class="image"><img src="_images/java-maven-01-downloading-maven-docker-image.png" alt="Downloading Maven Docker image" width="100%"></span></p>
</div>
</li>
<li>
<p>Runs the <code>Build</code> stage (defined in the <code>Jenkinsfile</code>) on the Maven container.
During this time, Maven downloads many artifacts necessary to build your Java
application, which will ultimately be stored in Jenkins&#8217;s local Maven
repository (in the Docker host&#8217;s filesystem).</p>
<div class="paragraph boxshadow">
<p><span class="image"><img src="_images/java-maven-02-initial-pipeline-downloading-maven-artifacts.png" alt="Downloading Maven artifacts" width="100%"></span></p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The Blue Ocean interface turns green if Jenkins built your Java application
successfully.</p>
</div>
<div class="paragraph boxshadow">
<p><span class="image"><img src="_images/java-maven-03-initial-pipeline-runs-successfully.png" alt="Initial Pipeline runs successfully" width="100%"></span></p>
</div>
</li>
<li>
<p>Click the <strong>X</strong> at the top-right to return to the main Blue Ocean interface.</p>
<div class="paragraph boxshadow">
<p><span class="image"><img src="_images/java-maven-04-main-blue-ocean-interface.png" alt="Main Blue Ocean interface" width="100%"></span></p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_add_a_test_stage_to_your_pipeline"><a class="anchor" href="#_add_a_test_stage_to_your_pipeline"></a>Add a test stage to your Pipeline</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go back to your text editor/IDE and ensure your <code>Jenkinsfile</code> is open.</p>
</li>
<li>
<p>Copy and paste the following Declarative Pipeline syntax immediately under the
<code>Build</code> stage of your <code>Jenkinsfile</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">        stage('Test') {
            steps {
                sh 'mvn test'
            }
            post {
                always {
                    junit 'target/surefire-reports/*.xml'
                }
            }
        }</code></pre>
</div>
</div>
<div class="paragraph">
<p>so that you end up with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">pipeline {
    agent {
        docker {
            image 'maven:3.9.0-eclipse-temurin-11'
            args '-v /root/.m2:/root/.m2'
        }
    }
    stages {
        stage('Build') {
            steps {
                sh 'mvn -B -DskipTests clean package'
            }
        }
        stage('Test') { <i class="conum" data-value="1"></i><b>(1)</b>
            steps {
                sh 'mvn test' <i class="conum" data-value="2"></i><b>(2)</b>
            }
            post {
                always {
                    junit 'target/surefire-reports/*.xml' <i class="conum" data-value="3"></i><b>(3)</b>
                }
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Defines a <a href="/doc/book/pipeline/syntax/#stage"><code>stage</code></a> (directive) called
<code>Test</code> that appears on the Jenkins UI.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This
<a href="/doc/pipeline/steps/workflow-durable-task-step/#code-sh-code-shell-script"><code>sh</code></a>
step (of the <a href="/doc/book/pipeline/syntax/#steps"><code>steps</code></a> section) executes
the Maven command to run the unit test on your simple Java application. This
command also generates a JUnit XML report, which is saved to the
<code>target/surefire-reports</code> directory (within the
<code>/var/jenkins_home/workspace/simple-java-maven-app</code> directory in the Jenkins
container).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This
<a href="/doc/pipeline/steps/junit/#code-junit-code-archive-junit-formatted-test-results"><code>junit</code></a>
step (provided by the <a href="/doc/pipeline/steps/junit">JUnit Plugin</a>) archives the
JUnit XML report (generated by the <code>mvn test</code> command above) and exposes the
results through the Jenkins interface. In Blue Ocean, the results are accessible
through the <strong>Tests</strong> page of a Pipeline run. The
<a href="/doc/book/pipeline/syntax/#post"><code>post</code></a> section&#8217;s <code>always</code> condition that
contains this <code>junit</code> step ensures that the step is <em>always</em> executed <em>at the
completion</em> of the <code>Test</code> stage, regardless of the stage&#8217;s outcome.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Save your edited <code>Jenkinsfile</code> and commit it to your local
<code>simple-java-maven-app</code> Git repository. E.g. Within the
<code>simple-java-maven-app</code> directory, run the commands:<br>
<code>git stage .</code><br>
then<br>
<code>git commit -m "Add 'Test' stage"</code></p>
</li>
<li>
<p>Go back to Jenkins again, log in again if necessary and ensure you&#8217;ve accessed
Jenkins&#8217;s Blue Ocean interface.</p>
</li>
<li>
<p>Click <strong>Run</strong> at the top left, then quickly click the <strong>OPEN</strong> link which appears
briefly at the lower-right to see Jenkins running your amended Pipeline
project. If you weren&#8217;t able to click the <strong>OPEN</strong> link, click the <em>top</em> row
on the Blue Ocean interface to access this feature.<br>
<strong>Note:</strong> You&#8217;ll notice from this run that Jenkins no longer needs to download
the Maven Docker image. Instead, Jenkins only needs to run a new container
from the Maven image downloaded previously. Also, if Docker had not restarted
since you last ran the Pipeline <a href="#create-your-initial-pipeline-as-a-jenkinsfile">above</a>,
then no Maven artifacts need to be downloaded during the "Build" stage.
Therefore, running your Pipeline this subsequent time should be much faster.<br>
If your amended Pipeline ran successfully, here&#8217;s what the Blue Ocean
interface should look like. Notice the additional "Test" stage. You can click
on the previous "Build" stage circle to access the output from that stage.</p>
<div class="paragraph boxshadow">
<p><span class="image"><img src="_images/java-maven-11-test-stage-runs-successfully-with-output.png" alt="Test stage runs successfully (with output)" width="100%"></span></p>
</div>
</li>
<li>
<p>Click the <strong>X</strong> at the top-right to return to the main Blue Ocean interface.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_add_a_final_deliver_stage_to_your_pipeline"><a class="anchor" href="#_add_a_final_deliver_stage_to_your_pipeline"></a>Add a final deliver stage to your Pipeline</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go back to your text editor/IDE and ensure your <code>Jenkinsfile</code> is open.</p>
</li>
<li>
<p>Copy and paste the following Declarative Pipeline syntax immediately under the
<code>Test</code> stage of your <code>Jenkinsfile</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">        stage('Deliver') {
            steps {
                sh './jenkins/scripts/deliver.sh'
            }
        }</code></pre>
</div>
</div>
<div class="paragraph">
<p>and add a <code>skipStagesAfterUnstable</code> option so that you end up with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">pipeline {
    agent {
        docker {
            image 'maven:3.9.0-eclipse-temurin-11'
            args '-v /root/.m2:/root/.m2'
        }
    }
    options {
        skipStagesAfterUnstable()
    }
    stages {
        stage('Build') {
            steps {
                sh 'mvn -B -DskipTests clean package'
            }
        }
        stage('Test') {
            steps {
                sh 'mvn test'
            }
            post {
                always {
                    junit 'target/surefire-reports/*.xml'
                }
            }
        }
        stage('Deliver') { <i class="conum" data-value="1"></i><b>(1)</b>
            steps {
                sh './jenkins/scripts/deliver.sh' <i class="conum" data-value="2"></i><b>(2)</b>
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Defines a new stage called <code>Deliver</code> that appears on the Jenkins UI.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This
<a href="/doc/pipeline/steps/workflow-durable-task-step/#code-sh-code-shell-script"><code>sh</code></a>
step (of the <a href="/doc/book/pipeline/syntax/#steps"><code>steps</code></a> section) runs the
shell script <code>deliver.sh</code> located in the <code>jenkins/scripts</code> directory from the
root of the <code>simple-java-maven-app</code> repository. Explanations about what this
script does are covered in the <code>deliver.sh</code> file itself. As a general principle,
it&#8217;s a good idea to keep your Pipeline code (i.e. the <code>Jenkinsfile</code>) as tidy as
possible and place more complex build steps (particularly for stages consisting
of 2 or more steps) into separate shell script files like the <code>deliver.sh</code> file.
This ultimately makes maintaining your Pipeline code easier, especially if your
Pipeline gains more complexity.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Save your edited <code>Jenkinsfile</code> and commit it to your local
<code>simple-java-maven-app</code> Git repository. E.g. Within the
<code>simple-java-maven-app</code> directory, run the commands:<br>
<code>git stage .</code><br>
then<br>
<code>git commit -m "Add 'Deliver' stage"</code></p>
</li>
<li>
<p>Go back to Jenkins again, log in again if necessary and ensure you&#8217;ve accessed
Jenkins&#8217;s Blue Ocean interface.</p>
</li>
<li>
<p>Click <strong>Run</strong> at the top left, then quickly click the <strong>OPEN</strong> link which appears
briefly at the lower-right to see Jenkins running your amended Pipeline
project. If you weren&#8217;t able to click the <strong>OPEN</strong> link, click the <em>top</em> row
on the Blue Ocean interface to access this feature.<br>
If your amended Pipeline ran successfully, here&#8217;s what the Blue Ocean
interface should look like. Notice the additional "Deliver" stage. Click on
the previous "Test" and "Build" stage circles to access the outputs from those
stages.</p>
<div class="paragraph boxshadow">
<p><span class="image"><img src="_images/java-maven-21-deliver-stage-runs-successfully.png" alt="Deliver stage runs successfully" width="100%"></span></p>
</div>
<div class="paragraph">
<p>Here&#8217;s what the output of the "Deliver" stage should look like, showing you the
execution results of your Java application at the end.</p>
</div>
<div class="paragraph boxshadow">
<p><span class="image"><img src="_images/java-maven-22-deliver-stage-output-only.png" alt="Deliver stage output only" width="100%"></span></p>
</div>
</li>
<li>
<p>Click the <strong>X</strong> at the top-right to return to the main Blue Ocean interface,
which lists your previous Pipeline runs in reverse chronological order.</p>
<div class="paragraph boxshadow">
<p><span class="image"><img src="_images/java-maven-23-main-blue-ocean-interface-with-all-previous-runs-displayed.png" alt="Main Blue Ocean interface with all previous runs displayed" width="100%"></span></p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_wrapping_up"><a class="anchor" href="#_wrapping_up"></a>Wrapping up</h3>
<div class="paragraph">
<p>Well done! You&#8217;ve just used Jenkins to build a simple Java application with
Maven!</p>
</div>
<div class="paragraph">
<p>The "Build", "Test" and "Deliver" stages you created above are the basis for
building more complex Java applications with Maven in Jenkins, as well as Java
and Maven applications that integrate with other technology stacks.</p>
</div>
<div class="paragraph">
<p>Because Jenkins is extremely extensible, it can be modified and configured to
handle practically any aspect of build orchestration and automation.</p>
</div>
<div class="paragraph">
<p>To learn more about what Jenkins can do, check out:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="/doc/tutorials">Tutorials overview</a> page for other introductory
tutorials.</p>
</li>
<li>
<p>The <a href="/doc/book">User Handbook</a> for more detailed information about using
Jenkins, such as <a href="/doc/book/pipeline">Pipelines</a> (in particular
<a href="/doc/book/pipeline/syntax">Pipeline syntax</a>) and the
<a href="/doc/book/blueocean">Blue Ocean</a> interface.</p>
</li>
<li>
<p>The <a href="/node">Jenkins blog</a> for the latest events, other tutorials and
updates.</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="tutorials-for-installing-jenkins-on-Google-Cloud.html">Jenkins on Google Cloud</a></span>
  <span class="next"><a href="build-a-node-js-and-react-app-with-npm.html">Build a Node.js and React app with npm</a></span>
</nav>
</article>
  </div>
</main>
</div>
<jio-footer></jio-footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
