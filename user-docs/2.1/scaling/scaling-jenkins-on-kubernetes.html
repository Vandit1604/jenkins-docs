<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Scaling Jenkins on Kubernetes :: Jenkins</title>
    <link rel="canonical" href="https://docs.jenkins.com/user-docs/2.401.3/scaling/scaling-jenkins-on-kubernetes.html">
    <link rel="prev" href="architecting-for-manageability.html">
    <link rel="next" href="../troubleshooting/index.html">
    <meta name="generator" content="Antora 3.1.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<script type="module" src="https://unpkg.com/@jenkinsci/jenkins-io-components?module"></script>
<jio-navbar style="  position: fixed;
  top: 0;
  width: 100vw;
  z-index: 100;"></jio-navbar>
  <div class="body">
<div class="nav-container" data-component="user-docs" data-version="2.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Jenkins User Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../installing-jenkins/index.html">Installing Jenkins</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../installing-jenkins/docker.html">Docker</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../installing-jenkins/initial-settings.html">Initial Settings</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../installing-jenkins/kubernetes.html">Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../installing-jenkins/linux.html">Linux</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../installing-jenkins/macos.html">macOS</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../installing-jenkins/offline.html">Offline Installations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../installing-jenkins/other.html">Other Systems</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../installing-jenkins/servlet-containers.html">Other Servlet Containers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../installing-jenkins/war-file.html">WAR file</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../installing-jenkins/windows.html">Windows</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../using-jenkins/index.html">Using Jenkins</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../using-jenkins/using-credentials.html">Using credentials</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../using-jenkins/searchbox.html">Using Search Box</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../using-jenkins/referencing-another-project-by-name.html">Referencing another project by name</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../using-jenkins/aborting-a-build.html">Aborting a build</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../using-jenkins/fingerprints.html">Fingerprints</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../using-jenkins/using-local-language.html">Using local language</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../using-jenkins/change-time-zone.html">Change time zone</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../using-jenkins/remote-access-api.html">Remote Access API</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../using-jenkins/executor-starvation.html">Executor Starvation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../using-jenkins/using-agents.html">Using Jenkins agents</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../using-jenkins/using-jmeter-with-jenkins.html">Using JMeter with Jenkins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../pipeline/index.html">Pipeline</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pipeline/getting-started.html">Getting started with Pipeline</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pipeline/jenkinsfile.html">Using a Jenkinsfile</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pipeline/running-pipelines.html">Running a Pipeline</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pipeline/multibranch.html">Branches and Pull Requests</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pipeline/docker.html">Using Docker with Pipeline</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pipeline/shared-libraries.html">Extending with Shared Libraries</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pipeline/development.html">Pipeline Development Tools</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pipeline/syntax.html">Pipeline Syntax</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pipeline/pipeline-best-practices.html">Pipeline Best Practices</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pipeline/scaling-pipeline.html">Scaling Pipelines</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pipeline/cps-method-mismatches.html">Pipeline CPS Method Mismatches</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../blueocean/index.html">Blue Ocean</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../blueocean/getting-started.html">Getting started with Blue Ocean</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../blueocean/creating-pipelines.html">Creating a Pipeline</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../blueocean/dashboard.html">Dashboard</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../blueocean/activity.html">Activity View</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../blueocean/pipeline-run-details.html">Pipeline Run Details View</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../blueocean/pipeline-editor.html">Pipeline Editor</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../managing/index.html">Managing Jenkins</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../managing/system-configuration.html">Configuring the System</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../managing/casc.html">Configuration as Code</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../managing/tools.html">Managing Tools</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../managing/plugins.html">Managing Plugins</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../managing/about-jenkins.html">About Jenkins</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../managing/system-info.html">System Information</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../managing/system-properties.html">Jenkins Features Controlled with System Properties</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../managing/change-system-timezone.html">Change System Time Zone</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../managing/cli.html">Jenkins CLI</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../managing/script-console.html">Script Console</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../managing/groovy-hook-scripts.html">Groovy Hook Scripts</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../managing/nodes.html">Managing Nodes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../managing/script-approval.html">In-process Script Approval</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../managing/users.html">Users</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../managing/ui-themes.html">Themes for user interface</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../managing/user-content.html">User Content</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../managing/spawning-processes.html">Spawning Processes From Build</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../security/index.html">Securing Jenkins</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security/access-control.html">Access Control</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security/securing-jenkins.html">Securing Jenkins</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security/managing-security.html">Managing Security</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security/controller-isolation.html">Controller Isolation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security/securing-builds.html">Securing Builds</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security/csrf-protection.html">CSRF Protection</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security/user-content.html">Rendering User Content</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security/build-authorization.html">Access Control for Builds</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security/environment-variables.html">Handling Environment Variables</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security/markup-formatter.html">Markup Formatters</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security/services.html">Exposed Services and Ports</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../system-administration/index.html">System Administration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../system-administration/backing-up.html">Backing-up/Restoring Jenkins</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../system-administration/monitoring.html">Monitoring Jenkins</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../system-administration/administering-jenkins-on-kubernetes.html">Administering Jenkins on Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../system-administration/with-chef.html">Managing Jenkins with Chef</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../system-administration/with-puppet.html">Managing Jenkins with Puppet</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../system-administration/viewing-logs.html">Viewing logs</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../system-administration/authenticating-scripted-clients.html">Authenticating scripted clients</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../system-administration/reverse-proxy-configuration.html">Reverse proxy configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../system-administration/reverse-proxy-configuration-apache.html">Reverse proxy - Apache</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../system-administration/reverse-proxy-configuration-nginx.html">Reverse proxy - Nginx</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../system-administration/reverse-proxy-configuration-haproxy.html">Reverse proxy - HAProxy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../system-administration/reverse-proxy-configuration-squid.html">Reverse proxy - Squid</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../system-administration/reverse-proxy-configuration-iis.html">Reverse proxy - IIS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../system-administration/reverse-proxy-configuration-iptables.html">Reverse proxy - iptables</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../system-administration/reverse-proxy-configuration-troubleshooting.html">Reverse proxy - Issues</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../system-administration/systemd-services.html">Managing systemd services</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Scaling Jenkins</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="architecting-for-scale.html">Architecting for Scale</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="hardware-recommendations.html">Hardware Recommendations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="architecting-for-manageability.html">Architecting for Manageability</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="scaling-jenkins-on-kubernetes.html">Scaling Jenkins on Kubernetes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../troubleshooting/index.html">Troubleshooting Jenkins</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../troubleshooting/diagnosing-errors.html">Diagnosing Errors</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../troubleshooting/obtaining-a-thread-dump.html">Obtaining a thread dump</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Jenkins User Documentation</span>
    <span class="version">2.1</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../about/index.html">About Jenkins</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../about/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../images/index.html">All of Jenkins Images</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../images/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../books/index.html">Jenkins Books</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../books/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../community/index.html">Jenkins Community</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../community/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../dev-docs/index.html">Jenkins Developer Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../dev-docs/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../download/latest/index.html">Jenkins Download and Deployment</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../download/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../events/index.html">Jenkins Events</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../events/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../Jenkins%20Project/index.html">Jenkins Project</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../Jenkins%20Project/index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../projects/index.html">Jenkins Projects</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../projects/index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../security/index.html">Jenkins Security Advisories</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../security/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../solutions/2.401.3/index.html">Jenkins Solutions Page</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../solutions/2.401.3/index.html">2.401.3</a>
        </li>
        <li class="version">
          <a href="../../../solutions/2.2/index.html">2.2</a>
        </li>
        <li class="version">
          <a href="../../../solutions/2.1/index.html">2.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../sigs/index.html">Jenkins Special Interest Groups</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../sigs/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../tutorial/2.401.3/index.html">Jenkins Tutorials</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../tutorial/2.401.3/index.html">2.401.3</a>
        </li>
        <li class="version">
          <a href="../../../tutorial/2.2/index.html">2.2</a>
        </li>
        <li class="version">
          <a href="../../../tutorial/2.1/index.html">2.1</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../2.401.3/index.html">Jenkins User Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../2.401.3/index.html">2.401.3</a>
        </li>
        <li class="version">
          <a href="../../2.2/index.html">2.2</a>
        </li>
        <li class="version is-current">
          <a href="../index.html">2.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../2.401.3/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Jenkins User Documentation</a></li>
    <li><a href="index.html">Scaling Jenkins</a></li>
    <li><a href="scaling-jenkins-on-kubernetes.html">Scaling Jenkins on Kubernetes</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">2.1</button>
  <div class="version-menu">
    <a class="version" href="../../2.401.3/scaling/scaling-jenkins-on-kubernetes.html">2.401.3</a>
    <a class="version" href="../../2.2/scaling/scaling-jenkins-on-kubernetes.html">2.2</a>
    <a class="version is-current" href="scaling-jenkins-on-kubernetes.html">2.1</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/Vandit1604/jenkins-docs/edit/2.401.2/docs/user-docs/modules/scaling/pages/scaling-jenkins-on-kubernetes.adoc"><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"/></svg>  Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Scaling Jenkins on Kubernetes</h1>
<div class="sect1">
<h2 id="_jenkins_scalability"><a class="anchor" href="#_jenkins_scalability"></a>Jenkins Scalability</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When using the standalone Jenkins server you don&#8217;t have to worry about
multiple servers and nodes.
However, the issue with this setup is that your server can become overloaded
with numerous jobs running at the same time.
There are ways to solve this problem by increasing the number of executors,
but you soon end up hitting a performance limit.</p>
</div>
<div class="paragraph">
<p>To overcome this problem, you can offload some of the jobs to different machines
called Jenkins agents.</p>
</div>
<div class="paragraph">
<p>Scalability is a measure that shows the ability of a system to expand its capabilities
to handle additional load.
One of the strongest sides of Jenkins is that it has a scaling feature out-of-the-box.
Jenkins scaling is based on the controller/agents model, where you have a number of agent instances and one main Jenkins instance called the controller that is responsible mainly for distributing jobs across the agents.
Jenkins agents run a small program that communicates with the Jenkins controller to check if there&#8217;s any job it can run.
When Jenkins finds a job scheduled, it transfers the build to the agent.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_scaling_jenkins_on_kubernetes"><a class="anchor" href="#_scaling_jenkins_on_kubernetes"></a>Scaling Jenkins on Kubernetes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Taking it a step further, running a container orchestrator such as Kubernetes, you can make Jenkins do smarter things.
The Jenkins controller is responsible for the hosting configuration and the distribution of jobs to multiple agents.
However, you don&#8217;t need the agents to be preexisting, they can be created on the fly, as in when they&#8217;re required.</p>
</div>
<div class="sect2">
<h3 id="_advantages_of_scaling_jenkins_on_kubernetes"><a class="anchor" href="#_advantages_of_scaling_jenkins_on_kubernetes"></a>Advantages of scaling Jenkins on Kubernetes</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Autohealing is possible</dt>
<dd>
<p>If your build or your agent gets corrupted, you no longer need to  worry — Jenkins will remove the unhealthy instance and spin up a new one.</p>
</dd>
<dt class="hdlist1">Run builds in parallel</dt>
<dd>
<p>You no longer have to plan the executors and limit them; instead, Jenkins will spin up an agent instance and run your build in it.</p>
</dd>
<dt class="hdlist1">Even load distribution</dt>
<dd>
<p>Kubernetes manages loads well, and it&#8217;ll make sure your Jenkins agents spin up in the best available server, which makes your builds faster and more efficient.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setting_up_scalable_jenkins_on_kubernetes"><a class="anchor" href="#_setting_up_scalable_jenkins_on_kubernetes"></a>Setting Up Scalable Jenkins on Kubernetes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_jenkins_controller_installation"><a class="anchor" href="#_jenkins_controller_installation"></a>Jenkins Controller Installation</h3>
<div class="paragraph">
<p>To install a Jenkins controller, create your docker image based on the base Jenkins image, which can be found in the official docker repository (keep in mind that Docker should be installed on your local machine, see the installation steps <a href="/doc/book/installing/docker/#installing-docker">here</a>).
For this, you need to create a dockerfile.
Having your Jenkins setup as a dockerfile is highly recommended to make your continuous integration infrastructure replicable and have it ready for setup from scratch.
So let&#8217;s create our first example dockerfile for the Jenkins controller:</p>
</div>
<div class="listingblock">
<div class="title">Dockerfile</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-Dockerfile hljs" data-lang="Dockerfile">FROM jenkins/jenkins:lts-slim <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs"># Pipelines with Blue Ocean UI and Kubernetes
RUN jenkins-plugin-cli --plugins blueocean kubernetes <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>FROM [image_name]:[tag]</code> - this line means that our dockerfile will be based on an existing image. It is obvious that for our dockerfile, we take the Jenkins base image, which you can find in the <a href="https://hub.docker.com/r/jenkins/jenkins">official Docker repository</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>RUN [command]</code> - this line means that we are going to run this command inside the image during the build process.
In our case we use the <code>RUN</code> command to install different common Jenkins plugins, which can be required for your Jenkins controller.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can install additional plugins just by adding similar commands inside your dockerfile
like we did above.
However, one of the plugins above is critical for installation.
It is the <a href="https://plugins.jenkins.io/kubernetes">Kubernetes plugin</a>.
This plugin is designed to implement Jenkins scaling on top of a Kubernetes cluster.</p>
</div>
<div class="paragraph">
<p>Next, we need to build the image that can be used and run inside the Kubernetes cluster later on.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Before building the image, if you use Minikube, then you need to keep in mind that Minikube runs on your local machine but inside a virtual machine.
That&#8217;s why Minikube doesn&#8217;t see the docker images you created on your local machine.
You can build your docker image right inside your Minikube virtual machine, but for this you need to execute this command:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">eval $(minikube docker-env)</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command doesn&#8217;t show any output after execution so if you didn&#8217;t get any errors then everything should be fine.
To build a docker image based on the dockerfile you created, all you need is to run this command from the same folder where you have created the dockerfile:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker build -t my-jenkins-image::1.1 .</code></pre>
</div>
</div>
<div class="paragraph">
<p>After the build process is finished, let&#8217;s verify that the newly created image is there:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker images
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-jenkins-image              1.1                 d6e46aa2470d        10 minutes ago      969MB</code></pre>
</div>
</div>
<div class="paragraph">
<p>Congratulations! Your Jenkins controller image is created and can be used inside your Kubernetes cluster.</p>
</div>
</div>
<div class="sect2">
<h3 id="_deploy_jenkins_controller"><a class="anchor" href="#_deploy_jenkins_controller"></a>Deploy Jenkins Controller</h3>
<div class="paragraph">
<p>After successfully creating your Jenkins image, follow the steps explained in the <a href="/doc/book/installing/kubernetes/#install-jenkins-with-yaml-files">Jenkins installation doc</a> to deploy your Jenkins controller.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Ensure to replace the image in the <code>jenkins-deployment.yaml</code> file with your locally built image above.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To validate that creating the deployment was successful you can invoke:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl get deployments -n jenkins</code></pre>
</div>
</div>
<div class="paragraph">
<p>To validate that creating the service was successful you can run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl get services -n jenkins
NAME       TYPE        CLUSTER-IP       EXTERNAL-IP    PORT(S)           AGE
jenkins    NodePort    10.103.31.217    &lt;none&gt;         8080:32664/TCP    59s</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_access_jenkins_dashboard"><a class="anchor" href="#_access_jenkins_dashboard"></a>Access Jenkins dashboard</h3>
<div class="paragraph">
<p>So now we have created a deployment and service, how do we access our Jenkins controller?</p>
</div>
<div class="paragraph">
<p>From the output above we can see that the service has been exposed on port <code>32664</code>.
In addition to that, we need to know the IP of the Kubernetes cluster itself.
We can get it by using this command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">minikube ip
192.168.99.100</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we can access the Jenkins controller instance at http://192.168.99.100:32664/</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jenkins_agents_configuration"><a class="anchor" href="#_jenkins_agents_configuration"></a>Jenkins Agents Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now it&#8217;s time to configure Jenkins agents.
As you might remember, we installed the Kubernetes plugin using the controller dockerfile so we don&#8217;t need to install anything separately and the required plugin should be already there.</p>
</div>
<div class="paragraph">
<p>In order to configure the Jenkins agents.
We need to know the URL of the Kubernetes controller and the internal cluster URL of the
Jenkins pod.
You can get the Kubernetes controller URL by this specified command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl cluster-info
Kubernetes control plane is running at https://192.168.49.2:8443
KubeDNS is running at https://192.168.49.2:8443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy

To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Jenkins pod URL port is standard - <code>8080</code>, and you can get IP address
following the steps below.
First, we need to get the Jenkins pod id, which is the value of the output provided by this command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl get pods -n jenkins | grep jenkins
&lt;pod_id&gt;   1/1       Running   0          9m</code></pre>
</div>
</div>
<div class="paragraph">
<p>Second, we need to run the command that describes the pods passing the pod id as an argument. You will find the IP address in the output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl describe pod -n jenkins jenkins-5fdbf5d7c5-dj2rq
…..
IP:             172.17.0.4</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_kubernetes_plugin_configuration"><a class="anchor" href="#_kubernetes_plugin_configuration"></a>Kubernetes Plugin Configuration</h3>
<div class="paragraph">
<p>Now, we are ready to fill in the Kubernetes plugin configuration. In order to do that, open the Jenkins UI and navigate to “Manage Jenkins &#8594; Nodes and Clouds &#8594; Clouds &#8594; Add a new cloud &#8594; Kubernetes and fill in the <code>Kubernetes URL</code> and <code>Jenkins URL</code> appropriately, by using the values which we have just collected in the previous step.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/kubernetes-plugin-configuration.png" alt="kubernetes-plugin-configuration">
</div>
</div>
<div class="paragraph">
<p>In addition to that, in the <code>Kubernetes Pod Template</code> section, we need to configure the image that will be used to spin up the agents.
If you have some custom requirements for your agents, you can build one more dockerfile with the appropriate changes the same way we did for the Jenkins controller.
On the other hand, if you don&#8217;t have unique requirements for your agents, you can use the default Jenkins agents image available on the <a href="https://hub.docker.com/r/jenkins/inbound-agent/">official Docker hub repository</a>. In the '<strong>Kubernetes Pod Template</strong>' section you need to specify the following (the rest of the configuration is up to you):</p>
</div>
<div class="paragraph">
<p>Kubernetes Pod Template Name - can be any and will be shown as a prefix for unique generated agents' names, which will be run automatically during builds
Docker image - the docker image name that will be used as a reference to spin up a new Jenkins agents.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/pod-template-configuration.png" alt="pod-template-configuration">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_jenkins_agents"><a class="anchor" href="#_using_jenkins_agents"></a>Using Jenkins Agents</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now all the configuration seems to be in place and we are ready for some tests. Let&#8217;s create two different build plans.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/build-jobs.png" alt="image">
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s trigger the execution for both of the builds.
You should see that both build plans appear in the <code>Build Queue</code> box almost immediately.</p>
</div>
<div class="paragraph">
<p>If you applied the correct configuration in the previous steps, you should see that you have two additional executors and both have the prefix <code>jenkins-agent</code>, in about 10-15 seconds.
This means that these nodes were automatically launched inside the Kubernetes cluster by using the Jenkins Kubernetes plugin, and, most importantly, that they were run in parallel.
You can also confirm this from the Kubernetes dashboard, which will show you a couple of
new pods.
After both builds are completed, you should see that both build executors have been removed and are not available inside the cluster anymore.</p>
</div>
<div class="paragraph">
<p>Congratulations! We&#8217;ve successfully set up scalable Jenkins on top of a Kubernetes cluster.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="architecting-for-manageability.html">Architecting for Manageability</a></span>
  <span class="next"><a href="../troubleshooting/index.html">Troubleshooting Jenkins</a></span>
</nav>
</article>
  </div>
</main>
</div>
<jio-footer></jio-footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
